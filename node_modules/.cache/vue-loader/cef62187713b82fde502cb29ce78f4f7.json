{"remainingRequest":"/Users/xianglin/WebstormProjects/PhoneBot/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xianglin/WebstormProjects/PhoneBot/src/views/ChatbotwithAva.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xianglin/WebstormProjects/PhoneBot/src/views/ChatbotwithAva.vue","mtime":1660232568920},{"path":"/Users/xianglin/WebstormProjects/PhoneBot/node_modules/cache-loader/dist/cjs.js","mtime":1658830951541},{"path":"/Users/xianglin/WebstormProjects/PhoneBot/node_modules/babel-loader/lib/index.js","mtime":1658830952626},{"path":"/Users/xianglin/WebstormProjects/PhoneBot/node_modules/cache-loader/dist/cjs.js","mtime":1658830951541},{"path":"/Users/xianglin/WebstormProjects/PhoneBot/node_modules/vue-loader/lib/index.js","mtime":1658830954765}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBCb3RVaSBmcm9tICIuLi9jb21wb25lbnRzL0JvdFVpIjsKLy8g5a+56LGh5byV5YWlCmltcG9ydCB7Ym90dWl9IGZyb20gJ0AvY29tcG9uZW50cy9Cb3RVaSc7CmltcG9ydCB7aW5zdGFuY2V9IGZyb20gIkAvcmVxdWVzdCI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkNoYXRib3R3aXRoQXZhIiwKICBjb21wb25lbnRzOiB7CiAgICBCb3RVaSwKICB9LAogIGRhdGE6IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB7CiAgICAgIC8v5a6e6aqM5p2h5Lu2CiAgICAgIGlkZW50aXR5X2N1ZTogIiIsCiAgICAgIGV4cGxhbmF0aW9uX3N0eWxlOiAiIiwKICAgICAgLy/mjqfliLblip/og70KICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIG1zZ19idG5fY3RybDogdHJ1ZSwKICAgICAgc2hvd19oZWxwOiB0cnVlLAogICAgICBzaG93X3JhdGU6IGZhbHNlLAogICAgICBzaG93X3ByZWZlcmVuY2U6IGZhbHNlLAogICAgICBzaG93X25leHRfcGFnZTogZmFsc2UsCiAgICAgIGhlbHBfc2hvd2VkX2NvdW50OiAxLAogICAgICBzaG93X2NhcnQ6IGZhbHNlLAogICAgICBzaG93X3Bob25lX3BhZ2U6IGZhbHNlLAogICAgICBwaG9uZV9idXR0b25zOiBbCiAgICAgICAgewogICAgICAgICAgdGV4dDogJ0FkZCB0byBjYXJ0JywKICAgICAgICAgIHZhbHVlOiAnQWRkIHRvIGNhcnQnCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0ZXh0OiAnTmV4dCBpdGVtJywKICAgICAgICAgIHZhbHVlOiAnTmV4dCBpdGVtJwogICAgICAgIH0sCiAgICAgIF0sCgogICAgICAvL2NyaXRpY2Fs55qE5qCH6K+GCiAgICAgIGluX2NyaXQ6IGZhbHNlLAogICAgICBjcml0X3RleHRfcG9pbnQ6IDAsCiAgICAgIGNyaXRfcGhvbmVfcG9pbnQ6IFswLCAwXSwKCiAgICAgIC8v5pWw5o2u6YOo5YiGCiAgICAgIHV1aWQ6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1dWlkIiksCiAgICAgIC8vdXVpZDogJ2UzNGNkZGM0YTdhZTQ3YmI5ZjdiYWRmOWU0NGNmNDFlJywKICAgICAgY2xpY2tlZF90cmFuc191cmw6ICIiLAogICAgICBtZXNzYWdlOiAiIiwKICAgICAgdXNlcl9wcmVmZXI6IHsKICAgICAgICBicmFuZHM6IFtdLAogICAgICAgIGJ1ZGdldDogNzAwLAogICAgICAgIGNhbWVyYXM6IDEyLAogICAgICB9LAogICAgICBwaG9uZV9pbl9jYXJ0OiBbXSwKICAgICAgY3VycmVudF9waG9uZToge30sCiAgICAgIGxhdGVzdF9kaWFsb2c6IFtdLAogICAgICBsYXN0X2FjdGlvbjogIiIsCiAgICAgIHRyeV9hbm90aGVyX2NvdW50OiAwLAogICAgICBjcml0aWNhbF9kYXRhOiBbXSwKICAgICAgYm90X21zZzogWydJIGZpbmQgdGhpcyBwaG9uZSBmb3IgeW91LicsICdZb3UgbWF5IGxpa2UgdGhpcyBwaG9uZS4nLCAnUGxlYXNlIGNoZWNrIHRoaXMgcGhvbmUuJ10KICAgIH0KICB9LAogIC8vIG1vdW50ZWQoKSB7CiAgLy8gICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidXVpZCIsICJlMzRjZGRjNGE3YWU0N2JiOWY3YmFkZjllNDRjZjQxZSIpOwogIC8vIH0sCiAgbWV0aG9kczogewogICAgLy/ku47ljaHniYfnu4Tku7bph4zpnaLojrflvpfngrnlh7vkuovku7bnmoR1cmwKICAgIGNsaWNrZWRfdXJsOiBmdW5jdGlvbiAoY2hpbGRWYWx1ZSkgewogICAgICB0aGlzLmNsaWNrZWRfdHJhbnNfdXJsID0gImh0dHBzOi8vd3d3LmNoYXRib3QuZmFuczozMDAwLz91cmw9IiArIGNoaWxkVmFsdWUKICAgICAgY29uc29sZS5sb2codGhpcy5jbGlja2VkX3RyYW5zX3VybCkKICAgICAgdGhpcy5zaG93X3Bob25lX3BhZ2UgPSB0cnVlOwogICAgfSwKICAgIC8v6buY6K6k5a+56K+dCiAgICBib3Q6IGZ1bmN0aW9uIChtc2cpIHsKICAgICAgbGV0IGNvbmZpZyA9IHsKICAgICAgICB0eXBlOiAnaHRtbCcsCiAgICAgICAgbG9hZGluZzogdHJ1ZSwKICAgICAgICBkZWxheTogMTYwMCwKICAgICAgICBwaG90bzogImh0dHBzOi8vbXVzaWNib3QtMTI1MTA1MjUzNS5jb3MuYXAtc2hhbmdoYWkubXlxY2xvdWQuY29tL3Bob25lYm90L2F2YXRhcjEucG5nIiwKICAgICAgICBjb250ZW50OiBtc2cKICAgICAgfTsKICAgICAgcmV0dXJuIGJvdHVpLm1lc3NhZ2UuYm90KGNvbmZpZykKICAgIH0sCiAgICAvL+aPkOS6pOaJi+acuuWBj+WlvQoKICAgIC8v5ZWG5ZOB5Y2h54mHCiAgICBib3RQaG9uZUNhcmQ6IGZ1bmN0aW9uIChwaG9uZSkgewogICAgICBib3R1aS5tZXNzYWdlLmJvdCh7CiAgICAgICAgdHlwZTogJ3Bob25lJywKICAgICAgICBsb2FkaW5nOiB0cnVlLAogICAgICAgIGRlbGF5OiAxNjAwLAogICAgICAgIGNvbnRlbnQ6IHBob25lLAogICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhib3R1aSkKICAgICAgICBib3R1aS5hY3Rpb24uYnV0dG9uKHsKICAgICAgICAgIGFkZE1lc3NhZ2U6IGZhbHNlLAogICAgICAgICAgaHVtYW46IGZhbHNlLAogICAgICAgICAgYWN0aW9uOiB0aGlzLnBob25lX2J1dHRvbnMKICAgICAgICB9KS50aGVuKChyZXMpID0+IHsKICAgICAgICAgIC8v5Yik5pat54K55LqG5LuA5LmI5oyJ6ZKuCiAgICAgICAgICBpZiAocmVzLnRleHQgPT09ICdBZGQgdG8gY2FydCcpIHsKICAgICAgICAgICAgdGhpcy5hZGRUb0NhcnQodGhpcy5jdXJyZW50X3Bob25lKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChyZXMudGV4dCA9PT0gJ05leHQgaXRlbScpIHsKICAgICAgICAgICAgdGhpcy50cnlBbm90aGVyKCk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAocmVzLnRleHQgPT09ICdMZXQgYm90IHN1Z2dlc3QnKSB7CiAgICAgICAgICAgIHRoaXMubGV0Qm90U3VnZ2VzdCgpCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgfSkKICAgIH0sCgogICAgLy/liJ3lp4vljJbnlKjmiLflgY/lpb0KICAgIHN1Ym1pdFByZWZlcmVuY2UodmFsdWVzKSB7CiAgICAgIGlmICh2YWx1ZXMuYnJhbmRzLmxlbmd0aCA8IDEpIHsKICAgICAgICB0aGlzLiR0b2FzdCgiUGxlYXNlIHNlbGVjdCBhdCBsYXN0IG9uZSBicmFuZC4iKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICAgIHZhbHVlc1sndXVpZCddID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3V1aWQnKTsKICAgICAgICB2YWx1ZXNbJ3ByZWZlclQnXSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICAgIGluc3RhbmNlLnBvc3QoJy9hcGkvcHJlZmVyJywgdmFsdWVzKS50aGVuKChyZXMpID0+IHsKICAgICAgICAgIC8vY29uc29sZS5sb2cocmVzKQogICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1cyA9PT0gMSkgewogICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5zaG93X3ByZWZlcmVuY2UgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5jdXJyZW50X3Bob25lID0gcmVzLmRhdGEucGhvbmU7CiAgICAgICAgICAgIC8v5re75Yqg5pON5L2c6K6w5b2VCiAgICAgICAgICAgIHRoaXMubGF0ZXN0X2RpYWxvZy5wdXNoKHsKICAgICAgICAgICAgICAiYWdlbnQiOiAicm9ib3QiLAogICAgICAgICAgICAgICJhY3Rpb24iOiAiSW5pdGlhbGl6ZSIsCiAgICAgICAgICAgICAgInRpbWVzdGFtcCI6IG5ldyBEYXRlKCkuZ2V0VGltZSgpCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIHRoaXMuYm90KCJHcmVhdCEgTm93IEkgaGF2ZSBmb3VuZCBzb21lIHBob25lcyBmb3IgeW91LiBZb3UgY2FuIGFkZCB0aGUgcGhvbmUgb2YgeW91ciBpbnRlcmVzdCB0byB0aGUgc2hvcHBpbmcgY2FydC4iKS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICB0aGlzLmJvdFBob25lQ2FyZCh0aGlzLmN1cnJlbnRfcGhvbmUpOwogICAgICAgICAgICAgIHRoaXMubXNnX2J0bl9jdHJsID0gZmFsc2U7CiAgICAgICAgICAgIH0pCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy4kdG9hc3QoIlBsZWFzZSByZWFkIGFuZCBhY2NlcHQgdGhlIGluZm9ybWVkIGNvbnNlbnQgZmlyc3QuIikKICAgICAgICAgIH0KICAgICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuJHRvYXN0KCJOZXR3b3JrIGVycm9yLCBwbGVhc2UgdHJ5IGFnYWluLiIpOwogICAgICAgIH0pCiAgICAgIH0KICAgIH0sCgogICAgLy/lj5HpgIHnlKjmiLfmtojmga8KICAgIHNlbmRNZXNzYWdlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMubGFzdF9hY3Rpb24gPSAnc2VuZE1lc3NhZ2UnOwogICAgICBib3R1aS5hY3Rpb24uaGlkZSgpOwogICAgICBpZiAodGhpcy5pbl9jcml0KSB7CiAgICAgICAgdGhpcy5pbl9jcml0ID0gZmFsc2U7CiAgICAgICAgdGhpcy5jcml0X3RleHRfcG9pbnQgPSAwOwogICAgICAgIHRoaXMuY3JpdF9waG9uZV9wb2ludCA9IFswLCAwXTsKICAgICAgfQogICAgICAvL+WFiOemgeeUqOaMiemSrgogICAgICBpZiAodGhpcy5tZXNzYWdlLmxlbmd0aCA+PSAyKSB7CiAgICAgICAgLy/lj6/ku6Xlj5HpgIEKICAgICAgICB0aGlzLm1zZ19idG5fY3RybCA9IHRydWU7CiAgICAgICAgYm90dWkubWVzc2FnZS5odW1hbih7CiAgICAgICAgICBjb250ZW50OiB0aGlzLm1lc3NhZ2UsCiAgICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLmxhdGVzdF9kaWFsb2cucHVzaCh7CiAgICAgICAgICAgICJhZ2VudCI6ICJ5b3UiLAogICAgICAgICAgICAidGV4dCI6IHRoaXMubWVzc2FnZSwKICAgICAgICAgICAgIm1vZGFsaXR5IjogInR5cGluZyIsCiAgICAgICAgICAgICJhY3Rpb24iOiAiVXNlcl9Dcml0aXF1ZSIsCiAgICAgICAgICAgICJjcml0aXF1ZSI6IFtdLAogICAgICAgICAgICAiY3JpdGlxdWVkX2l0ZW0iOiB0aGlzLmN1cnJlbnRfcGhvbmUuaWQsCiAgICAgICAgICAgICJ0aW1lc3RhbXAiOiBuZXcgRGF0ZSgpLmdldFRpbWUoKQogICAgICAgICAgfSkKICAgICAgICAgIGluc3RhbmNlLnBvc3QoJy9hcGkvdXNlck1lc3NhZ2UnLCB7CiAgICAgICAgICAgIG1zZ1Q6IG5ldyBEYXRlKCkuZ2V0VGltZSgpLAogICAgICAgICAgICBtZXNzYWdlOiB0aGlzLm1lc3NhZ2UsCiAgICAgICAgICAgIGxvZ2dlcjogdGhpcy5sYXRlc3RfZGlhbG9nLAogICAgICAgICAgICB1dWlkOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXVpZCcpLAogICAgICAgICAgfSkudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICAgIHRoaXMuY3VycmVudF9waG9uZSA9IHJlcy5kYXRhLnBob25lOwogICAgICAgICAgICB0aGlzLmxhdGVzdF9kaWFsb2cgPSBbXTsKICAgICAgICAgICAgbGV0IG1zZyA9IHRoaXMuYm90X21zZ1t0aGlzLnJhbmRvbU51bSgwLCAyKV0KICAgICAgICAgICAgdGhpcy5ib3QobXNnKS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICB0aGlzLmJvdFBob25lQ2FyZCh0aGlzLmN1cnJlbnRfcGhvbmUpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy5tc2dfYnRuX2N0cmwgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gbnVsbDsKICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICAgICAgdGhpcy5tc2dfYnRuX2N0cmwgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy4kdG9hc3QoJ1BsZWFzZSB0cnkgYWdhaW4uJyk7CiAgICAgICAgICB9KQogICAgICAgIH0pCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5tc2dfYnRuX2N0cmwgPSBmYWxzZTsKICAgICAgICB0aGlzLiR0b2FzdCgnUGxlYXNlIGVudGVyIG1vcmUgaW5mb3JtYXRpb24uJyk7CiAgICAgIH0KCiAgICB9LAoKICAgIC8v5Yqg5YWl6LSt54mp6L2mCiAgICBhZGRUb0NhcnQoKSB7CiAgICAgIHRoaXMubGFzdF9hY3Rpb24gPSAiYWRkVG9DYXJ0IjsKICAgICAgdGhpcy5ib3QoIlBsZWFzZSByYXRlIHlvdXIgbGlrZWQgcGhvbmUuIikudGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy5zaG93X3JhdGUgPSB0cnVlCiAgICAgIH0pCiAgICAgIHRoaXMubGF0ZXN0X2RpYWxvZy5wdXNoKHsKICAgICAgICAiYWdlbnQiOiAieW91IiwKICAgICAgICAiYWN0aW9uIjogIkFjY2VwdF9JdGVtIiwKICAgICAgICAidGltZXN0YW1wIjogbmV3IERhdGUoKS5nZXRUaW1lKCkKICAgICAgfSkKICAgIH0sCgogICAgLy/miYvmnLror4TliIYKICAgIHN1Ym1pdFBob25lUmF0ZSgpIHsKICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLmNyaXRfcGhvbmVfcG9pbnQpOwogICAgICB0aGlzLmxhc3RfYWN0aW9uID0gJ3N1Ym1pdFBob25lUmF0ZSc7CiAgICAgIGlmICh0aGlzLmN1cnJlbnRfcGhvbmUucmF0ZSkgewogICAgICAgIHRoaXMucGhvbmVfaW5fY2FydC5wdXNoKHRoaXMuY3VycmVudF9waG9uZSk7CiAgICAgICAgdGhpcy5zaG93X3JhdGUgPSBmYWxzZTsKICAgICAgICBpZiAodGhpcy5waG9uZV9pbl9jYXJ0Lmxlbmd0aCA9PT0gMykgewogICAgICAgICAgdGhpcy5zaG93X25leHRfcGFnZSA9IHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmICh0aGlzLmluX2NyaXQpIHsKICAgICAgICAgICAgaWYgKHRoaXMuY3JpdF90ZXh0X3BvaW50IDwgMyAmJiB0aGlzLmNyaXRfcGhvbmVfcG9pbnRbMV0gPT09IDMpIHsKICAgICAgICAgICAgICB0aGlzLmNyaXRfcGhvbmVfcG9pbnRbMV0gPSAwCiAgICAgICAgICAgICAgdGhpcy5jcml0X3Bob25lX3BvaW50WzBdICs9IDEKICAgICAgICAgICAgICB0aGlzLmNyaXRfdGV4dF9wb2ludCArPSAxCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHRoaXMuY3JpdF90ZXh0X3BvaW50IDwgMyAmJiB0aGlzLmNyaXRfcGhvbmVfcG9pbnRbMV0gPT09IDApIHsKICAgICAgICAgICAgICAvL+mcgOimgWJvdCDor7Tor50KICAgICAgICAgICAgICBib3R1aS5tZXNzYWdlLmJvdCh7CiAgICAgICAgICAgICAgICB0eXBlOiAnaHRtbCcsCiAgICAgICAgICAgICAgICBsb2FkaW5nOiB0cnVlLAogICAgICAgICAgICAgICAgZGVsYXk6IDE2MDAsCiAgICAgICAgICAgICAgICBjb250ZW50OiB0aGlzLmNyaXRpY2FsX2RhdGFbJ2NyaXQnXVt0aGlzLmNyaXRfdGV4dF9wb2ludF0KICAgICAgICAgICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgIGJvdHVpLmFjdGlvbi5idXR0b24oewogICAgICAgICAgICAgICAgICBhZGRNZXNzYWdlOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgaHVtYW46IGZhbHNlLAogICAgICAgICAgICAgICAgICBhY3Rpb246IFt7CiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ1llcycsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICdZZXMnCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgdGV4dDogJ05vJywKICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnTm8nCiAgICAgICAgICAgICAgICAgICAgfV0KICAgICAgICAgICAgICAgIH0pLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICAgICAgICAvL+WIpOaWreeCueS6huS7gOS5iOaMiemSrgogICAgICAgICAgICAgICAgICBpZiAocmVzLnRleHQgPT09ICdZZXMnKSB7CiAgICAgICAgICAgICAgICAgICAgLy/mn6Xor6LmiYvmnLrmmK/ku4DkuYgKICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5nZXQoIi9hcGkvcGhvbmU/aWQ9IiArIHRoaXMuY3JpdGljYWxfZGF0YVsncGhvbmVzJ11bdGhpcy5jcml0X3Bob25lX3BvaW50WzBdXVt0aGlzLmNyaXRfcGhvbmVfcG9pbnRbMV1dKS50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudF9waG9uZSA9IHJlcy5kYXRhCiAgICAgICAgICAgICAgICAgICAgICAvL+WxleekuuaJi+acuuWNoeeJhwogICAgICAgICAgICAgICAgICAgICAgdGhpcy5QaG9uZUNhcmRfMmJ0bih0aGlzLmN1cnJlbnRfcGhvbmUpCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNyaXRfcGhvbmVfcG9pbnRbMV0gKz0gMQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgaWYgKHJlcy50ZXh0ID09PSAnTm8nKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jcml0X3Bob25lX3BvaW50WzBdICs9IDEKICAgICAgICAgICAgICAgICAgICB0aGlzLmNyaXRfcGhvbmVfcG9pbnRbMV0gPSAwCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jcml0X3RleHRfcG9pbnQgKz0gMQogICAgICAgICAgICAgICAgICAgIHRoaXMudHJ5QW5vdGhlcigpCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNyaXRfcGhvbmVfcG9pbnRbMV0gPCAzICYmIHRoaXMuY3JpdF90ZXh0X3BvaW50IDwgMykgewogICAgICAgICAgICAgIGluc3RhbmNlLmdldCgiL2FwaS9waG9uZT9pZD0iICsgdGhpcy5jcml0aWNhbF9kYXRhWydwaG9uZXMnXVt0aGlzLmNyaXRfcGhvbmVfcG9pbnRbMF1dW3RoaXMuY3JpdF9waG9uZV9wb2ludFsxXV0pLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50X3Bob25lID0gcmVzLmRhdGE7CiAgICAgICAgICAgICAgICB0aGlzLmNyaXRfcGhvbmVfcG9pbnRbMV0gKz0gMTsKICAgICAgICAgICAgICAgIHRoaXMuUGhvbmVDYXJkXzJidG4odGhpcy5jdXJyZW50X3Bob25lKTsKICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIC8v5YWo6YO95bGV56S65a6M5LqG77yM57uZ5LiA5Liq5paw55qE5o6o6I2QCiAgICAgICAgICAgICAgdGhpcy5pbl9jcml0ID0gZmFsc2U7CiAgICAgICAgICAgICAgdGhpcy5jcml0X3RleHRfcG9pbnQgPSAwOwogICAgICAgICAgICAgIHRoaXMuY3JpdF9waG9uZV9wb2ludCA9IFswLCAwXTsKICAgICAgICAgICAgICBpbnN0YW5jZS5wb3N0KCIvYXBpL3VwZGF0ZW1vZGVsIiwgewogICAgICAgICAgICAgICAgdXVpZDogdGhpcy51dWlkLAogICAgICAgICAgICAgICAgbG9nZ2VyOiB0aGlzLmxhdGVzdF9kaWFsb2csCiAgICAgICAgICAgICAgICBsVGltZTogbmV3IERhdGUoKS5nZXRUaW1lKCksCiAgICAgICAgICAgICAgfSkudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmxhdGVzdF9kaWFsb2cgPSBbXTsKICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudF9waG9uZSA9IHJlcy5kYXRhLnBob25lOwogICAgICAgICAgICAgICAgdGhpcy5ib3RQaG9uZUNhcmQodGhpcy5jdXJyZW50X3Bob25lKTsKICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmluX2NyaXQgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5jcml0X3RleHRfcG9pbnQgPSAwOwogICAgICAgICAgICB0aGlzLmNyaXRfcGhvbmVfcG9pbnQgPSBbMCwgMF07CiAgICAgICAgICAgIGluc3RhbmNlLnBvc3QoIi9hcGkvdXBkYXRlbW9kZWwiLCB7CiAgICAgICAgICAgICAgdXVpZDogdGhpcy51dWlkLAogICAgICAgICAgICAgIGxvZ2dlcjogdGhpcy5sYXRlc3RfZGlhbG9nLAogICAgICAgICAgICAgIGxUaW1lOiBuZXcgRGF0ZSgpLmdldFRpbWUoKSwKICAgICAgICAgICAgfSkudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5sYXRlc3RfZGlhbG9nID0gW107CiAgICAgICAgICAgICAgdGhpcy5jdXJyZW50X3Bob25lID0gcmVzLmRhdGEucGhvbmU7CiAgICAgICAgICAgICAgbGV0IG1zZyA9IHRoaXMuYm90X21zZ1t0aGlzLnJhbmRvbU51bSgwLCAyKV0KICAgICAgICAgICAgICB0aGlzLmJvdChtc2cpLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy5ib3RQaG9uZUNhcmQodGhpcy5jdXJyZW50X3Bob25lKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSkKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kdG9hc3QoIlBsZWFzZSByYXRlIHRoaXMgcGhvbmUgZmlyc3QuIikKICAgICAgfQogICAgfSwKCiAgICAvL+WGjeadpeS4gOS4quaOqOiNkAogICAgdHJ5QW5vdGhlcigpIHsKICAgICAgY29uc29sZS5sb2codGhpcy5jcml0X3Bob25lX3BvaW50KTsKICAgICAgaWYgKHRoaXMuaW5fY3JpdCkgewogICAgICAgIGlmICh0aGlzLmNyaXRfdGV4dF9wb2ludCA8IDMgJiYgdGhpcy5jcml0X3Bob25lX3BvaW50WzFdID09PSAzKSB7CiAgICAgICAgICB0aGlzLmNyaXRfcGhvbmVfcG9pbnRbMV0gPSAwCiAgICAgICAgICB0aGlzLmNyaXRfcGhvbmVfcG9pbnRbMF0gKz0gMQogICAgICAgICAgdGhpcy5jcml0X3RleHRfcG9pbnQgKz0gMQogICAgICAgIH0KICAgICAgICBpZiAodGhpcy5jcml0X3RleHRfcG9pbnQgPCAzICYmIHRoaXMuY3JpdF9waG9uZV9wb2ludFsxXSA9PT0gMCkgewogICAgICAgICAgLy/pnIDopoFib3Qg6K+06K+dCiAgICAgICAgICBib3R1aS5tZXNzYWdlLmJvdCh7CiAgICAgICAgICAgIHR5cGU6ICdodG1sJywKICAgICAgICAgICAgbG9hZGluZzogdHJ1ZSwKICAgICAgICAgICAgZGVsYXk6IDE2MDAsCiAgICAgICAgICAgIGNvbnRlbnQ6IHRoaXMuY3JpdGljYWxfZGF0YVsnY3JpdCddW3RoaXMuY3JpdF90ZXh0X3BvaW50XQogICAgICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgICAgIGJvdHVpLmFjdGlvbi5idXR0b24oewogICAgICAgICAgICAgIGFkZE1lc3NhZ2U6IGZhbHNlLAogICAgICAgICAgICAgIGh1bWFuOiBmYWxzZSwKICAgICAgICAgICAgICBhY3Rpb246IFt7CiAgICAgICAgICAgICAgICB0ZXh0OiAnWWVzJywKICAgICAgICAgICAgICAgIHZhbHVlOiAnWWVzJwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIHRleHQ6ICdObycsCiAgICAgICAgICAgICAgICAgIHZhbHVlOiAnTm8nCiAgICAgICAgICAgICAgICB9XQogICAgICAgICAgICB9KS50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICAvL+WIpOaWreeCueS6huS7gOS5iOaMiemSrgogICAgICAgICAgICAgIGlmIChyZXMudGV4dCA9PT0gJ1llcycpIHsKICAgICAgICAgICAgICAgIC8v5p+l6K+i5omL5py65piv5LuA5LmICiAgICAgICAgICAgICAgICBpbnN0YW5jZS5nZXQoIi9hcGkvcGhvbmU/aWQ9IiArIHRoaXMuY3JpdGljYWxfZGF0YVsncGhvbmVzJ11bdGhpcy5jcml0X3Bob25lX3BvaW50WzBdXVt0aGlzLmNyaXRfcGhvbmVfcG9pbnRbMV1dKS50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50X3Bob25lID0gcmVzLmRhdGEKICAgICAgICAgICAgICAgICAgLy/lsZXnpLrmiYvmnLrljaHniYcKICAgICAgICAgICAgICAgICAgdGhpcy5QaG9uZUNhcmRfMmJ0bih0aGlzLmN1cnJlbnRfcGhvbmUpCiAgICAgICAgICAgICAgICAgIHRoaXMuY3JpdF9waG9uZV9wb2ludFsxXSArPSAxCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAocmVzLnRleHQgPT09ICdObycpIHsKICAgICAgICAgICAgICAgIHRoaXMuY3JpdF9waG9uZV9wb2ludFswXSArPSAxCiAgICAgICAgICAgICAgICB0aGlzLmNyaXRfcGhvbmVfcG9pbnRbMV0gPSAwCiAgICAgICAgICAgICAgICB0aGlzLmNyaXRfdGV4dF9wb2ludCArPSAxCiAgICAgICAgICAgICAgICB0aGlzLnRyeUFub3RoZXIoKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgIH0pCiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNyaXRfcGhvbmVfcG9pbnRbMV0gPCAzICYmIHRoaXMuY3JpdF90ZXh0X3BvaW50IDwgMykgewogICAgICAgICAgaW5zdGFuY2UuZ2V0KCIvYXBpL3Bob25lP2lkPSIgKyB0aGlzLmNyaXRpY2FsX2RhdGFbJ3Bob25lcyddW3RoaXMuY3JpdF9waG9uZV9wb2ludFswXV1bdGhpcy5jcml0X3Bob25lX3BvaW50WzFdXSkudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgIHRoaXMuY3VycmVudF9waG9uZSA9IHJlcy5kYXRhOwogICAgICAgICAgICB0aGlzLmNyaXRfcGhvbmVfcG9pbnRbMV0gKz0gMTsKICAgICAgICAgICAgdGhpcy5QaG9uZUNhcmRfMmJ0bih0aGlzLmN1cnJlbnRfcGhvbmUpOwogICAgICAgICAgfSkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy/lhajpg73lsZXnpLrlrozkuobvvIznu5nkuIDkuKrmlrDnmoTmjqjojZAKICAgICAgICAgIHRoaXMuaW5fY3JpdCA9IGZhbHNlOwogICAgICAgICAgdGhpcy5jcml0X3RleHRfcG9pbnQgPSAwOwogICAgICAgICAgdGhpcy5jcml0X3Bob25lX3BvaW50ID0gWzAsIDBdOwogICAgICAgICAgaW5zdGFuY2UucG9zdCgiL2FwaS91cGRhdGVtb2RlbCIsIHsKICAgICAgICAgICAgdXVpZDogdGhpcy51dWlkLAogICAgICAgICAgICBsb2dnZXI6IHRoaXMubGF0ZXN0X2RpYWxvZywKICAgICAgICAgICAgbFRpbWU6IG5ldyBEYXRlKCkuZ2V0VGltZSgpLAogICAgICAgICAgfSkudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgIHRoaXMubGF0ZXN0X2RpYWxvZyA9IFtdOwogICAgICAgICAgICB0aGlzLmN1cnJlbnRfcGhvbmUgPSByZXMuZGF0YS5waG9uZTsKICAgICAgICAgICAgdGhpcy5ib3RQaG9uZUNhcmQodGhpcy5jdXJyZW50X3Bob25lKTsKICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0aGlzLnRyeV9hbm90aGVyX2NvdW50ID09PSAwKSB7CiAgICAgICAgICB0aGlzLnRyeV9hbm90aGVyX2NvdW50ICs9IDE7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLmxhc3RfYWN0aW9uID09PSAndHJ5QW5vdGhlcicpIHsKICAgICAgICAgIHRoaXMudHJ5X2Fub3RoZXJfY291bnQgKz0gMQogICAgICAgIH0KICAgICAgICBpZiAodGhpcy50cnlfYW5vdGhlcl9jb3VudCA9PT0gMykgewogICAgICAgICAgdGhpcy5sYXN0X2FjdGlvbiA9ICJsZXRCb3RTdWdnZWN0IjsKICAgICAgICAgIHRoaXMudHJ5X2Fub3RoZXJfY291bnQgPSAwOwogICAgICAgICAgdGhpcy5sZXRCb3RTdWdnZXN0KCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMubGFzdF9hY3Rpb24gPSAidHJ5QW5vdGhlciI7CiAgICAgICAgICBib3R1aS5tZXNzYWdlLmh1bWFuKHsKICAgICAgICAgICAgY29udGVudDogIlNob3cgYW5vdGhlciBwaG9uZSIsCiAgICAgICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICAgICAgdGhpcy5sYXRlc3RfZGlhbG9nLnB1c2goewogICAgICAgICAgICAgICJhZ2VudCI6ICJ5b3UiLAogICAgICAgICAgICAgICJhY3Rpb24iOiAiTmV4dCIsCiAgICAgICAgICAgICAgInRpbWVzdGFtcCI6IG5ldyBEYXRlKCkuZ2V0VGltZSgpCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIGluc3RhbmNlLnBvc3QoIi9hcGkvdXBkYXRlbW9kZWwiLCB7CiAgICAgICAgICAgICAgdXVpZDogdGhpcy51dWlkLAogICAgICAgICAgICAgIGxvZ2dlcjogdGhpcy5sYXRlc3RfZGlhbG9nLAogICAgICAgICAgICAgIGxUaW1lOiBuZXcgRGF0ZSgpLmdldFRpbWUoKSwKICAgICAgICAgICAgfSkudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5sYXRlc3RfZGlhbG9nID0gW107CiAgICAgICAgICAgICAgdGhpcy5jdXJyZW50X3Bob25lID0gcmVzLmRhdGEucGhvbmU7CiAgICAgICAgICAgICAgbGV0IG1zZyA9IHRoaXMuYm90X21zZ1t0aGlzLnJhbmRvbU51bSgwLCAyKV0KICAgICAgICAgICAgICB0aGlzLmJvdChtc2cpLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy5ib3RQaG9uZUNhcmQodGhpcy5jdXJyZW50X3Bob25lKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSkKICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICB9CiAgICB9LAoKLy8gbGV0IGJvdCBzdWdnZXN0CiAgICBsZXRCb3RTdWdnZXN0OiBmdW5jdGlvbiAoKSB7CiAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgdGhpcy5pbl9jcml0ID0gdHJ1ZTsKICAgICAgYm90dWkubWVzc2FnZS5ib3QoewogICAgICAgIHR5cGU6ICdodG1sJywKICAgICAgICBsb2FkaW5nOiB0cnVlLAogICAgICB9KS50aGVuKChpbmRleCkgPT4gewogICAgICAgIC8v55u05o6l5Y+R6YCB6K+35rGC6I635Y+W5o6o6I2Q55qE5YiX6KGoCiAgICAgICAgaW5zdGFuY2UucG9zdCgiL2FwaS9zeXNjcmkiLCB7CiAgICAgICAgICB1dWlkOiB0aGlzLnV1aWQsCiAgICAgICAgICBsb2dnZXI6IHRoaXMubGF0ZXN0X2RpYWxvZywKICAgICAgICAgIGxUaW1lOiBuZXcgRGF0ZSgpLmdldFRpbWUoKSwKICAgICAgICB9KS50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoYXQuY3JpdGljYWxfZGF0YSA9IHJlcy5kYXRhWydwaG9uZXMnXQogICAgICAgIH0pLnRoZW4oKCkgPT4gKAogICAgICAgICAgICAvL+W+l+WIsOaOqOiNkOWIl+ihqOWQju+8jOW8gOWni+WxleekugogICAgICAgICAgICBib3R1aS5tZXNzYWdlLnVwZGF0ZShpbmRleCwgewogICAgICAgICAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICAgICAgICAgIGNvbnRlbnQ6IHRoYXQuY3JpdGljYWxfZGF0YVsnY3JpdCddW3RoaXMuY3JpdF90ZXh0X3BvaW50XQogICAgICAgICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAvL+WFiOmXrnllcyBubwogICAgICAgICAgICAgIGJvdHVpLmFjdGlvbi5idXR0b24oewogICAgICAgICAgICAgICAgYWRkTWVzc2FnZTogZmFsc2UsCiAgICAgICAgICAgICAgICBodW1hbjogZmFsc2UsCiAgICAgICAgICAgICAgICBhY3Rpb246IFt7CiAgICAgICAgICAgICAgICAgIHRleHQ6ICdZZXMnLAogICAgICAgICAgICAgICAgICB2YWx1ZTogJ1llcycKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnTm8nLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnTm8nCiAgICAgICAgICAgICAgICAgIH1dCiAgICAgICAgICAgICAgfSkudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgICAvL+WIpOaWreeCueS6huS7gOS5iOaMiemSrgogICAgICAgICAgICAgICAgaWYgKHJlcy50ZXh0ID09PSAnWWVzJykgewogICAgICAgICAgICAgICAgICAvL+afpeivouaJi+acuuaYr+S7gOS5iAogICAgICAgICAgICAgICAgICBpbnN0YW5jZS5nZXQoIi9hcGkvcGhvbmU/aWQ9IiArIHRoaXMuY3JpdGljYWxfZGF0YVsncGhvbmVzJ11bdGhpcy5jcml0X3Bob25lX3BvaW50WzBdXVt0aGlzLmNyaXRfcGhvbmVfcG9pbnRbMV1dKS50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRfcGhvbmUgPSByZXMuZGF0YQogICAgICAgICAgICAgICAgICAgIC8v5bGV56S65omL5py65Y2h54mHCiAgICAgICAgICAgICAgICAgICAgdGhpcy5QaG9uZUNhcmRfMmJ0bih0aGlzLmN1cnJlbnRfcGhvbmUpCiAgICAgICAgICAgICAgICAgICAgdGhpcy5jcml0X3Bob25lX3BvaW50WzFdICs9IDEKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChyZXMudGV4dCA9PT0gJ05vJykgewogICAgICAgICAgICAgICAgICB0aGlzLmNyaXRfcGhvbmVfcG9pbnRbMF0gKz0gMQogICAgICAgICAgICAgICAgICB0aGlzLmNyaXRfcGhvbmVfcG9pbnRbMV0gPSAwCiAgICAgICAgICAgICAgICAgIHRoaXMuY3JpdF90ZXh0X3BvaW50ICs9IDEKICAgICAgICAgICAgICAgICAgdGhpcy50cnlBbm90aGVyKCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9KQogICAgICAgICkpCiAgICAgIH0pCiAgICB9LAoKLy/nu5nns7vnu5/mjqjojZDnlKgKICAgIFBob25lQ2FyZF8yYnRuOiBmdW5jdGlvbiAocGhvbmUpIHsKICAgICAgYm90dWkubWVzc2FnZS5ib3QoewogICAgICAgIHR5cGU6ICdwaG9uZScsCiAgICAgICAgbG9hZGluZzogdHJ1ZSwKICAgICAgICBkZWxheTogMTYwMCwKICAgICAgICBjb250ZW50OiBwaG9uZSwKICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgYm90dWkuYWN0aW9uLmJ1dHRvbih7CiAgICAgICAgICBhZGRNZXNzYWdlOiBmYWxzZSwKICAgICAgICAgIGh1bWFuOiBmYWxzZSwKICAgICAgICAgIGFjdGlvbjogW3sKICAgICAgICAgICAgdGV4dDogJ0FkZCB0byBjYXJ0JywKICAgICAgICAgICAgdmFsdWU6ICdBZGQgdG8gY2FydCcKICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICB0ZXh0OiAnTmV4dCBpdGVtJywKICAgICAgICAgICAgICB2YWx1ZTogJ05leHQgaXRlbScKICAgICAgICAgICAgfV0KICAgICAgICB9KS50aGVuKChyZXMpID0+IHsKICAgICAgICAgIC8v5Yik5pat54K55LqG5LuA5LmI5oyJ6ZKuCiAgICAgICAgICBpZiAocmVzLnRleHQgPT09ICdBZGQgdG8gY2FydCcpIHsKICAgICAgICAgICAgdGhpcy5hZGRUb0NhcnQodGhpcy5jdXJyZW50X3Bob25lKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChyZXMudGV4dCA9PT0gJ05leHQgaXRlbScpIHsKICAgICAgICAgICAgdGhpcy50cnlBbm90aGVyKCk7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgfSkKICAgIH0sCgovL+W3puS4iuinknRpcHPpg6jliIYKICAgIGNsaWNrSGVscDogZnVuY3Rpb24gKCkgewogICAgICB0aGlzLnNob3dfaGVscCA9IHRydWU7CiAgICAgIHRoaXMuaGVscF9zaG93ZWRfY291bnQgKz0gMTsKICAgIH0sCgovL+WIneWni+WMluW8leWvvOivreeahOWFpeWPowogICAgY2xvc2VIZWxwOiBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICh0aGlzLmhlbHBfc2hvd2VkX2NvdW50ID09PSAxKSB7CiAgICAgICAgLy8g5Yid5aeL54q25oCBCiAgICAgICAgdGhpcy5ib3QoIkhleSwgSSBhbSBBbGljZSwgeW91ciBhc3Npc3RhbnQgZm9yIGJ1eWluZyBtb2JpbGUgcGhvbmVzLiBDb3VsZCB5b3UgdGVsbCBtZSB3aGF0IGtpbmRzIG9mIHBob25lcyB5b3UgbGlrZT8iKS50aGVuKCgpID0+IHsKICAgICAgICAgIGJvdHVpLmFjdGlvbi5idXR0b24oewogICAgICAgICAgICBhZGRNZXNzYWdlOiB0cnVlLAogICAgICAgICAgICBodW1hbjogZmFsc2UsCiAgICAgICAgICAgIGFjdGlvbjogW3t0ZXh0OiAiT0siLCB2YWx1ZTogIk9LIn1dCiAgICAgICAgICB9KS50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgaWYgKHJlcy50ZXh0ID09PSAnT0snKSB7CiAgICAgICAgICAgICAgdGhpcy5zaG93X3ByZWZlcmVuY2UgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgIH0pCiAgICAgIH0KICAgIH0sCgovL+i0reeJqei9pumDqOWIhgogICAgY2xpY2tDYXJ0OiBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMuc2hvd19jYXJ0ID0gdHJ1ZQogICAgfSwKLy/ot7PliLDkuIvkuIDpobUKICAgIG5leHRQYWdlOiBmdW5jdGlvbiAoKSB7CiAgICAgIGluc3RhbmNlLnBvc3QoJy9hcGkvcGFnZTInLCB7CiAgICAgICAgJ3BhZ2UyVCc6IG5ldyBEYXRlKCkuZ2V0VGltZSgpLAogICAgICAgICdwaG9uZWxpc3QnOiB0aGlzLnBob25lX2luX2NhcnQsCiAgICAgICAgJ3V1aWQnOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXVpZCcpCiAgICAgIH0pLnRoZW4oKHJlcykgPT4gewogICAgICAgIGNvbnNvbGUubG9nKHJlcykKICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSgnL3F1ZTEnKS5jYXRjaCgoZXJyKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSkKICAgICAgICB9KTsKICAgICAgfSkKICAgIH0sCgogICAgcmFuZG9tTnVtOiBmdW5jdGlvbiAobWluTnVtLCBtYXhOdW0pIHsKICAgICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgcmV0dXJuIHBhcnNlSW50KE1hdGgucmFuZG9tKCkgKiBtaW5OdW0gKyAxLCAxMCk7CiAgICAgICAgY2FzZSAyOgogICAgICAgICAgcmV0dXJuIHBhcnNlSW50KE1hdGgucmFuZG9tKCkgKiAobWF4TnVtIC0gbWluTnVtICsgMSkgKyBtaW5OdW0sIDEwKTsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmV0dXJuIDA7CiAgICAgIH0KICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICAvLyDorqHnrpflsZ7mgKfnmoQgZ2V0dGVyCiAgICBjYXJ0X2l0ZW1fY291bnQ6IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHRoaXMucGhvbmVfaW5fY2FydC5sZW5ndGg7CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["ChatbotwithAva.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsSA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ChatbotwithAva.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"chatbot\">\n    <van-nav-bar title='PhoneBot' @click-left=\"clickHelp\" @click-right=\"clickCart\" left-text=\"\"\n                 right-text=\"Cart\" class=\"chatbot-header\">\n      <template #left>\n        <van-icon name=\"info-o\" size=\"16\"><span\n            style=\"color: #1989fa;font-size: 16px;font-family:-apple-system,BlinkMacSystemFont,'Helvetica Neue',Helvetica,Segoe UI,Arial,Roboto,'PingFang SC',miui,'Hiragino Sans GB','Microsoft Yahei',sans-serif \">Tips</span>\n        </van-icon>\n\n      </template>\n      <template #right>\n        <van-icon name=\"cart-o\" size=\"16\" :badge=\"cart_item_count\"><span\n            style=\"color: #1989fa;font-size: 16px;font-family:-apple-system,BlinkMacSystemFont,'Helvetica Neue',Helvetica,Segoe UI,Arial,Roboto,'PingFang SC',miui,'Hiragino Sans GB','Microsoft Yahei',sans-serif \">Cart</span>\n        </van-icon>\n      </template>\n    </van-nav-bar>\n    <div class=\"chatbot-send\">\n      <van-field\n          v-model=\"message\"\n          rows=\"1\"\n          autosize\n      >\n        <template #button>\n          <van-button size=\"small\" :disabled=\"msg_btn_ctrl\" type=\"info\" @click=\"sendMessage\"> Send</van-button>\n        </template>\n      </van-field>\n    </div>\n    <div class=\"chatbot-content\">\n      <BotUi v-on:clicked_url=\"clicked_url\"></BotUi>\n    </div>\n\n    <!-- 初始化的偏好-->\n    <van-popup\n        v-model=\"show_preference\"\n        :style=\"{width:'90%'}\"\n        :close-on-click-overlay=\"false\"\n        round\n    >\n      <van-nav-bar title='My Preference'/>\n      <div class=\"phone_preference\">\n        <van-form @submit=\"submitPreference\">\n          <p style=\"padding:0 10px 0 16px; margin-bottom: 5px;\">Please select no more than three brands you like.</p>\n          <van-field name=\"brands\" :rules=\"[{ required: true, message: 'Please select' }]\">\n            <template #input>\n              <van-checkbox-group v-model=\"user_prefer.brands\" :max=\"3\" direction=\"horizontal\">\n                <van-checkbox name=\"Xiaomi\" shape=\"square\">Xiaomi</van-checkbox>\n                <van-checkbox name=\"vivo\" shape=\"square\">vivo</van-checkbox>\n                <van-checkbox name=\"Oppo\" shape=\"square\">Oppo</van-checkbox>\n                <van-checkbox name=\"Samsung\" shape=\"square\">Samsung</van-checkbox>\n                <van-checkbox name=\"Realme\" shape=\"square\">Realme</van-checkbox>\n                <van-checkbox name=\"Motorola\" shape=\"square\">Motorola</van-checkbox>\n                <van-checkbox name=\"Honor\" shape=\"square\">Honor</van-checkbox>\n                <van-checkbox name=\"Huawei\" shape=\"square\">Huawei</van-checkbox>\n                <van-checkbox name=\"ZTE\" shape=\"square\">ZTE</van-checkbox>\n                <van-checkbox name=\"BLU\" shape=\"square\">BLU</van-checkbox>\n                <van-checkbox name=\"Nokia\" shape=\"square\">Nokia</van-checkbox>\n                <van-checkbox name=\"LG\" shape=\"square\">LG</van-checkbox>\n                <van-checkbox name=\"Ulefone\" shape=\"square\">Ulefone</van-checkbox>\n                <van-checkbox name=\"TCL\" shape=\"square\">TCL</van-checkbox>\n                <van-checkbox name=\"OnePlus\" shape=\"square\">OnePlus</van-checkbox>\n                <van-checkbox name=\"alcatel\" shape=\"square\">alcatel</van-checkbox>\n                <van-checkbox name=\"Asus\" shape=\"square\">Asus</van-checkbox>\n                <van-checkbox name=\"Lenovo\" shape=\"square\">Lenovo</van-checkbox>\n                <van-checkbox name=\"Sony\" shape=\"square\">Sony</van-checkbox>\n                <van-checkbox name=\"HTC\" shape=\"square\">HTC</van-checkbox>\n                <van-checkbox name=\"Meizu\" shape=\"square\">Meizu</van-checkbox>\n                <van-checkbox name=\"Wiko\" shape=\"square\">Wiko</van-checkbox>\n                <van-checkbox name=\"Tecno\" shape=\"square\">Tecno</van-checkbox>\n                <van-checkbox name=\"Lava\" shape=\"square\">Lava</van-checkbox>\n                <van-checkbox name=\"Infinix\" shape=\"square\">Infinix</van-checkbox>\n                <van-checkbox name=\"Google\" shape=\"square\">Google</van-checkbox>\n                <van-checkbox name=\"Apple\" shape=\"square\">Apple</van-checkbox>\n              </van-checkbox-group>\n            </template>\n          </van-field>\n\n          <p style=\"padding:0 10px 0 16px; margin-bottom: 5px;\">Your Maximum Budget: <span\n              style=\"color: #B24040\">${{ user_prefer.budget }}</span></p>\n          <van-field name=\"budget\" :rules=\"[{ required: true, message: 'please select' }]\">\n            <template #input>\n              <van-slider :min=\"100\" :max=\"1400\" :step=\"100\" v-model=\"user_prefer.budget\"/>\n            </template>\n          </van-field>\n          <p style=\"padding:0 10px 0 16px; margin-bottom: 5px;\">Main Camera Minimum Resolution: <span\n              style=\"color: #B24040\">{{ user_prefer.cameras }}MP</span></p>\n          <van-field name=\"cameras\" :rules=\"[{ required: true, message: 'please select' }]\">\n            <template #input>\n              <van-slider :min=\"0\" :max=\"108\" :step=\"6\" v-model=\"user_prefer.cameras\"/>\n            </template>\n          </van-field>\n          <div style=\"margin: 16px;\">\n            <van-button round block type=\"info\" native-type=\"submit\">Continue</van-button>\n          </div>\n        </van-form>\n      </div>\n    </van-popup>\n    <!--  左侧 help-->\n    <van-popup\n        v-model=\"show_help\"\n        :style=\"{ height: '520px',width:'90%',overflow:'hidden'}\"\n        @close=\"closeHelp\"\n        :close-on-click-overlay=\"true\"\n        round\n    >\n      <div class=\"help\">\n        <van-nav-bar\n            right-text=\"Close\"\n            :fixed=\"true\"\n            @click-right=\"show_help=!show_help\"\n        />\n        <!--        <div style=\"position: fixed;top: 0\">-->\n        <!--          <van-button type=\"info\" block @click=\"show_help=!show_help\" round > Close</van-button>-->\n        <!--        </div>-->\n        <div\n            style=\"width:100%; box-sizing: border-box; margin-top: 36px; position: absolute; top:0; left: 0;padding: 0 10px 10px 10px; overflow-y: scroll;-webkit-overflow-scrolling: touch;height: 480px\">\n          <h3>Tips for tuning the recommendations by phone features</h3>\n          <h4>By brand:</h4>\n          <ul>\n            <li>\"I like the iPhone.\"</li>\n            <li>\"I want to buy a Huawei mobile phone.\"</li>\n          </ul>\n\n          <h4>By price:</h4>\n          <ul>\n            <li>\"I want to buy a cheaper price phone.\"</li>\n            <li>\"The price can be higher.\"</li>\n          </ul>\n\n          <h4>By resolution:</h4>\n          <ul>\n            <li>\"I need a phone having better display.\"</li>\n            <li>\"I want a phone having higher resolution.\"</li>\n          </ul>\n\n          <h4> By storage:</h4>\n          <ul>\n            <li>\"I need a phone with a large storage.\"</li>\n            <li>\"I need a phone having more space for saving my photos.\"</li>\n          </ul>\n          <h4>By computing performance:</h4>\n          <ul>\n            <li>\"I want to buy a phone having larger RAM.\"</li>\n            <li>\"I want to buy a phone having better CPU.\"</li>\n            <li>\"I want to buy a phone running applications faster.\"</li>\n          </ul>\n\n          <h4>By operating system:</h4>\n          <ul>\n            <li>\"I want to buy an Android phone.\"</li>\n            <li>\"I like the ios system.\"</li>\n          </ul>\n          <h4>By size:</h4>\n          <ul>\n            <li>\"I like a light weight phone.\"</li>\n            <li>\"I want to buy a phone with a slim body.\"</li>\n          </ul>\n          <br>\n        </div>\n      </div>\n\n    </van-popup>\n\n    <!--右侧购物车-->\n    <van-popup\n        v-model=\"show_cart\"\n        closeable\n        close-icon=\"close\"\n        position=\"right\"\n        round\n        :style=\"{ height: '100%',width:'80%' }\"\n    >\n      <div class=\"cart\" style=\"margin-top:3em\">\n        <van-card v-for=\"item in phone_in_cart\" :key=\"item.id\"\n                  :thumb=\"item.img\">\n          <template #title>\n            <div style=\"font-size: 16px;font-weight: bolder;\">{{ item.modelname }}</div>\n          </template>\n          <template #price>\n            <div style=\"font-weight:bold;font-size:16px;color: #B24040\">${{ item.price }}</div>\n          </template>\n          <template #num>\n            <div>Rating:{{ item.rate }}</div>\n          </template>\n          <template #tags>\n            <div>\n              <van-tag plain type=\"primary\" style=\"margin:2px\">Storage:{{ item.storage }}</van-tag>\n              <van-tag plain type=\"primary\" style=\"margin:2px\">RAM:{{ item.ram }}</van-tag>\n              <van-tag plain type=\"primary\" style=\"margin:2px\">{{ item.os1 }}</van-tag>\n              <van-tag plain type=\"primary\" style=\"margin: 2px\">{{ item.cam1 }}MP</van-tag>\n              <van-tag plain type=\"primary\" style=\"margin: 2px\">{{ item.displaysize }}inches</van-tag>\n              <van-tag plain type=\"primary\" style=\"margin: 2px\">{{ item.resolution1 }}*{{ item.resolution2 }}</van-tag>\n              <van-tag plain type=\"primary\" style=\"margin: 2px\">{{ item.battery }}mAh</van-tag>\n            </div>\n          </template>\n        </van-card>\n      </div>\n    </van-popup>\n\n    <van-popup\n        v-model=\"show_phone_page\"\n        closeable\n        close-icon=\"close\"\n        position=\"left\"\n        round\n        :style=\"{ height: '100%',width:'100%' }\"\n    >\n      <div class=\"cart\" style=\"margin-top:3em;height: 100%\">\n        <iframe style=\"width: 100%;height: 100%\" :src=\"clicked_trans_url\"/>\n      </div>\n    </van-popup>\n\n    <!--    评分框-->\n    <van-popup\n        v-model=\"show_rate\"\n        :style=\"{width:'300px' }\"\n        :close-on-click-overlay=\"false\"\n        round\n    >\n      <div class=\"rate\">\n        <van-nav-bar title='Please rate this phone'/>\n        <van-card\n            :thumb=\"current_phone.img\">\n          <template #title>\n            <div style=\"font-size: 16px;font-weight: bolder;\">{{ current_phone.modelname }}</div>\n          </template>\n          <template #price>\n            <div style=\"font-weight:bold;font-size:16px;color: #B24040\">${{ current_phone.price }}</div>\n          </template>\n          <template #tags>\n            <div>\n              <van-tag plain type=\"primary\" style=\"margin:2px\">Storage:{{ current_phone.storage }}</van-tag>\n              <van-tag plain type=\"primary\" style=\"margin:2px\">RAM:{{ current_phone.ram }}</van-tag>\n              <van-tag plain type=\"primary\" style=\"margin:2px\">{{ current_phone.os1 }}</van-tag>\n              <van-tag plain type=\"primary\" style=\"margin: 2px\">{{ current_phone.cam1 }}MP</van-tag>\n              <van-tag plain type=\"primary\" style=\"margin: 2px\">{{ current_phone.displaysize }}inches</van-tag>\n              <van-tag plain type=\"primary\" style=\"margin: 2px\">\n                {{ current_phone.resolution1 }}*{{ current_phone.resolution2 }}\n              </van-tag>\n              <van-tag plain type=\"primary\" style=\"margin: 2px\">{{ current_phone.battery }}mAh</van-tag>\n            </div>\n          </template>\n        </van-card>\n        <div style=\"display: flex;justify-content: center;margin: 24px 0;\">\n          <van-rate v-model=\"current_phone.rate\"/>\n        </div>\n        <van-button type=\"info\" block @click=\"submitPhoneRate\">Submit</van-button>\n      </div>\n    </van-popup>\n\n    <!-- 去下一页   -->\n    <van-popup\n        v-model=\"show_next_page\"\n        :style=\"{width:'300px' }\"\n        :close-on-click-overlay=\"false\"\n        round\n    >\n      <div class=\"rate\">\n        <van-nav-bar title='Next Step'/>\n        <div class=\"cart\">\n          <van-card v-for=\"item in phone_in_cart\" :key=\"item.id\"\n                    :thumb=\"item.img\">\n            <template #title>\n              <div style=\"font-size: 16px;font-weight: bolder;\">{{ item.modelname }}</div>\n            </template>\n            <template #price>\n              <div style=\"font-weight:bold;font-size:16px;color: #B24040\">${{ item.price }}</div>\n            </template>\n            <template #num>\n              <div>Rating:{{ item.rate }}</div>\n            </template>\n            <template #tags>\n              <div>\n                <van-tag plain type=\"primary\" style=\"margin:2px\">Storage:{{ item.storage }}</van-tag>\n                <van-tag plain type=\"primary\" style=\"margin:2px\">RAM:{{ item.ram }}</van-tag>\n                <van-tag plain type=\"primary\" style=\"margin:2px\">{{ item.os1 }}</van-tag>\n                <van-tag plain type=\"primary\" style=\"margin: 2px\">{{ item.cam1 }}MP</van-tag>\n                <van-tag plain type=\"primary\" style=\"margin: 2px\">{{ item.displaysize }}inches</van-tag>\n                <van-tag plain type=\"primary\" style=\"margin: 2px\">{{ item.resolution1 }}*{{\n                    item.resolution2\n                  }}\n                </van-tag>\n                <van-tag plain type=\"primary\" style=\"margin: 2px\">{{ item.battery }}mAh</van-tag>\n              </div>\n            </template>\n          </van-card>\n        </div>\n        <p style=\"padding:0 16px;\">These are your favorite phones. Let's move to the next step.</p>\n        <van-button type=\"primary\" block @click=\"nextPage\">Next</van-button>\n      </div>\n    </van-popup>\n  </div>\n</template>\n\n<script>\nimport BotUi from \"../components/BotUi\";\n// 对象引入\nimport {botui} from '@/components/BotUi';\nimport {instance} from \"@/request\";\n\nexport default {\n  name: \"ChatbotwithAva\",\n  components: {\n    BotUi,\n  },\n  data: function () {\n    return {\n      //实验条件\n      identity_cue: \"\",\n      explanation_style: \"\",\n      //控制功能\n      loading: false,\n      msg_btn_ctrl: true,\n      show_help: true,\n      show_rate: false,\n      show_preference: false,\n      show_next_page: false,\n      help_showed_count: 1,\n      show_cart: false,\n      show_phone_page: false,\n      phone_buttons: [\n        {\n          text: 'Add to cart',\n          value: 'Add to cart'\n        },\n        {\n          text: 'Next item',\n          value: 'Next item'\n        },\n      ],\n\n      //critical的标识\n      in_crit: false,\n      crit_text_point: 0,\n      crit_phone_point: [0, 0],\n\n      //数据部分\n      uuid: localStorage.getItem(\"uuid\"),\n      //uuid: 'e34cddc4a7ae47bb9f7badf9e44cf41e',\n      clicked_trans_url: \"\",\n      message: \"\",\n      user_prefer: {\n        brands: [],\n        budget: 700,\n        cameras: 12,\n      },\n      phone_in_cart: [],\n      current_phone: {},\n      latest_dialog: [],\n      last_action: \"\",\n      try_another_count: 0,\n      critical_data: [],\n      bot_msg: ['I find this phone for you.', 'You may like this phone.', 'Please check this phone.']\n    }\n  },\n  // mounted() {\n  //   localStorage.setItem(\"uuid\", \"e34cddc4a7ae47bb9f7badf9e44cf41e\");\n  // },\n  methods: {\n    //从卡片组件里面获得点击事件的url\n    clicked_url: function (childValue) {\n      this.clicked_trans_url = \"https://www.chatbot.fans:3000/?url=\" + childValue\n      console.log(this.clicked_trans_url)\n      this.show_phone_page = true;\n    },\n    //默认对话\n    bot: function (msg) {\n      let config = {\n        type: 'html',\n        loading: true,\n        delay: 1600,\n        photo: \"https://musicbot-1251052535.cos.ap-shanghai.myqcloud.com/phonebot/avatar1.png\",\n        content: msg\n      };\n      return botui.message.bot(config)\n    },\n    //提交手机偏好\n\n    //商品卡片\n    botPhoneCard: function (phone) {\n      botui.message.bot({\n        type: 'phone',\n        loading: true,\n        delay: 1600,\n        content: phone,\n      }).then(() => {\n        console.log(botui)\n        botui.action.button({\n          addMessage: false,\n          human: false,\n          action: this.phone_buttons\n        }).then((res) => {\n          //判断点了什么按钮\n          if (res.text === 'Add to cart') {\n            this.addToCart(this.current_phone);\n          }\n          if (res.text === 'Next item') {\n            this.tryAnother();\n          }\n          if (res.text === 'Let bot suggest') {\n            this.letBotSuggest()\n          }\n        })\n      })\n    },\n\n    //初始化用户偏好\n    submitPreference(values) {\n      if (values.brands.length < 1) {\n        this.$toast(\"Please select at last one brand.\");\n      } else {\n        this.loading = true;\n        values['uuid'] = localStorage.getItem('uuid');\n        values['preferT'] = new Date().getTime();\n        instance.post('/api/prefer', values).then((res) => {\n          //console.log(res)\n          if (res.data.status === 1) {\n            this.loading = false;\n            this.show_preference = false;\n            this.current_phone = res.data.phone;\n            //添加操作记录\n            this.latest_dialog.push({\n              \"agent\": \"robot\",\n              \"action\": \"Initialize\",\n              \"timestamp\": new Date().getTime()\n            })\n            this.bot(\"Great! Now I have found some phones for you. You can add the phone of your interest to the shopping cart.\").then(() => {\n              this.botPhoneCard(this.current_phone);\n              this.msg_btn_ctrl = false;\n            })\n          } else {\n            this.loading = false;\n            this.$toast(\"Please read and accept the informed consent first.\")\n          }\n        }).catch((err) => {\n          console.log(err.message);\n          this.loading = false;\n          this.$toast(\"Network error, please try again.\");\n        })\n      }\n    },\n\n    //发送用户消息\n    sendMessage: function () {\n      this.last_action = 'sendMessage';\n      botui.action.hide();\n      if (this.in_crit) {\n        this.in_crit = false;\n        this.crit_text_point = 0;\n        this.crit_phone_point = [0, 0];\n      }\n      //先禁用按钮\n      if (this.message.length >= 2) {\n        //可以发送\n        this.msg_btn_ctrl = true;\n        botui.message.human({\n          content: this.message,\n        }).then(() => {\n          this.latest_dialog.push({\n            \"agent\": \"you\",\n            \"text\": this.message,\n            \"modality\": \"typing\",\n            \"action\": \"User_Critique\",\n            \"critique\": [],\n            \"critiqued_item\": this.current_phone.id,\n            \"timestamp\": new Date().getTime()\n          })\n          instance.post('/api/userMessage', {\n            msgT: new Date().getTime(),\n            message: this.message,\n            logger: this.latest_dialog,\n            uuid: localStorage.getItem('uuid'),\n          }).then((res) => {\n            console.log(res);\n            this.current_phone = res.data.phone;\n            this.latest_dialog = [];\n            let msg = this.bot_msg[this.randomNum(0, 2)]\n            this.bot(msg).then(() => {\n              this.botPhoneCard(this.current_phone);\n            });\n            this.msg_btn_ctrl = false;\n            this.message = null;\n          }).catch(() => {\n            this.msg_btn_ctrl = false;\n            this.$toast('Please try again.');\n          })\n        })\n      } else {\n        this.msg_btn_ctrl = false;\n        this.$toast('Please enter more information.');\n      }\n\n    },\n\n    //加入购物车\n    addToCart() {\n      this.last_action = \"addToCart\";\n      this.bot(\"Please rate your liked phone.\").then(() => {\n        this.show_rate = true\n      })\n      this.latest_dialog.push({\n        \"agent\": \"you\",\n        \"action\": \"Accept_Item\",\n        \"timestamp\": new Date().getTime()\n      })\n    },\n\n    //手机评分\n    submitPhoneRate() {\n      //console.log(this.crit_phone_point);\n      this.last_action = 'submitPhoneRate';\n      if (this.current_phone.rate) {\n        this.phone_in_cart.push(this.current_phone);\n        this.show_rate = false;\n        if (this.phone_in_cart.length === 3) {\n          this.show_next_page = true;\n        } else {\n          if (this.in_crit) {\n            if (this.crit_text_point < 3 && this.crit_phone_point[1] === 3) {\n              this.crit_phone_point[1] = 0\n              this.crit_phone_point[0] += 1\n              this.crit_text_point += 1\n            }\n            if (this.crit_text_point < 3 && this.crit_phone_point[1] === 0) {\n              //需要bot 说话\n              botui.message.bot({\n                type: 'html',\n                loading: true,\n                delay: 1600,\n                content: this.critical_data['crit'][this.crit_text_point]\n              }).then(() => {\n                botui.action.button({\n                  addMessage: false,\n                  human: false,\n                  action: [{\n                    text: 'Yes',\n                    value: 'Yes'\n                  },\n                    {\n                      text: 'No',\n                      value: 'No'\n                    }]\n                }).then((res) => {\n                  //判断点了什么按钮\n                  if (res.text === 'Yes') {\n                    //查询手机是什么\n                    instance.get(\"/api/phone?id=\" + this.critical_data['phones'][this.crit_phone_point[0]][this.crit_phone_point[1]]).then((res) => {\n                      this.current_phone = res.data\n                      //展示手机卡片\n                      this.PhoneCard_2btn(this.current_phone)\n                      this.crit_phone_point[1] += 1\n                    })\n                  }\n                  if (res.text === 'No') {\n                    this.crit_phone_point[0] += 1\n                    this.crit_phone_point[1] = 0\n                    this.crit_text_point += 1\n                    this.tryAnother()\n                  }\n                })\n              })\n            } else if (this.crit_phone_point[1] < 3 && this.crit_text_point < 3) {\n              instance.get(\"/api/phone?id=\" + this.critical_data['phones'][this.crit_phone_point[0]][this.crit_phone_point[1]]).then((res) => {\n                this.current_phone = res.data;\n                this.crit_phone_point[1] += 1;\n                this.PhoneCard_2btn(this.current_phone);\n              })\n            } else {\n              //全都展示完了，给一个新的推荐\n              this.in_crit = false;\n              this.crit_text_point = 0;\n              this.crit_phone_point = [0, 0];\n              instance.post(\"/api/updatemodel\", {\n                uuid: this.uuid,\n                logger: this.latest_dialog,\n                lTime: new Date().getTime(),\n              }).then((res) => {\n                this.latest_dialog = [];\n                this.current_phone = res.data.phone;\n                this.botPhoneCard(this.current_phone);\n              })\n            }\n          } else {\n            this.in_crit = false;\n            this.crit_text_point = 0;\n            this.crit_phone_point = [0, 0];\n            instance.post(\"/api/updatemodel\", {\n              uuid: this.uuid,\n              logger: this.latest_dialog,\n              lTime: new Date().getTime(),\n            }).then((res) => {\n              this.latest_dialog = [];\n              this.current_phone = res.data.phone;\n              let msg = this.bot_msg[this.randomNum(0, 2)]\n              this.bot(msg).then(() => {\n                this.botPhoneCard(this.current_phone);\n              });\n            })\n          }\n        }\n      } else {\n        this.$toast(\"Please rate this phone first.\")\n      }\n    },\n\n    //再来一个推荐\n    tryAnother() {\n      console.log(this.crit_phone_point);\n      if (this.in_crit) {\n        if (this.crit_text_point < 3 && this.crit_phone_point[1] === 3) {\n          this.crit_phone_point[1] = 0\n          this.crit_phone_point[0] += 1\n          this.crit_text_point += 1\n        }\n        if (this.crit_text_point < 3 && this.crit_phone_point[1] === 0) {\n          //需要bot 说话\n          botui.message.bot({\n            type: 'html',\n            loading: true,\n            delay: 1600,\n            content: this.critical_data['crit'][this.crit_text_point]\n          }).then(() => {\n            botui.action.button({\n              addMessage: false,\n              human: false,\n              action: [{\n                text: 'Yes',\n                value: 'Yes'\n              },\n                {\n                  text: 'No',\n                  value: 'No'\n                }]\n            }).then((res) => {\n              //判断点了什么按钮\n              if (res.text === 'Yes') {\n                //查询手机是什么\n                instance.get(\"/api/phone?id=\" + this.critical_data['phones'][this.crit_phone_point[0]][this.crit_phone_point[1]]).then((res) => {\n                  this.current_phone = res.data\n                  //展示手机卡片\n                  this.PhoneCard_2btn(this.current_phone)\n                  this.crit_phone_point[1] += 1\n                })\n              }\n              if (res.text === 'No') {\n                this.crit_phone_point[0] += 1\n                this.crit_phone_point[1] = 0\n                this.crit_text_point += 1\n                this.tryAnother()\n              }\n            })\n          })\n        } else if (this.crit_phone_point[1] < 3 && this.crit_text_point < 3) {\n          instance.get(\"/api/phone?id=\" + this.critical_data['phones'][this.crit_phone_point[0]][this.crit_phone_point[1]]).then((res) => {\n            this.current_phone = res.data;\n            this.crit_phone_point[1] += 1;\n            this.PhoneCard_2btn(this.current_phone);\n          })\n        } else {\n          //全都展示完了，给一个新的推荐\n          this.in_crit = false;\n          this.crit_text_point = 0;\n          this.crit_phone_point = [0, 0];\n          instance.post(\"/api/updatemodel\", {\n            uuid: this.uuid,\n            logger: this.latest_dialog,\n            lTime: new Date().getTime(),\n          }).then((res) => {\n            this.latest_dialog = [];\n            this.current_phone = res.data.phone;\n            this.botPhoneCard(this.current_phone);\n          })\n        }\n      } else {\n        if (this.try_another_count === 0) {\n          this.try_another_count += 1;\n        }\n        if (this.last_action === 'tryAnother') {\n          this.try_another_count += 1\n        }\n        if (this.try_another_count === 3) {\n          this.last_action = \"letBotSuggect\";\n          this.try_another_count = 0;\n          this.letBotSuggest();\n        } else {\n          this.last_action = \"tryAnother\";\n          botui.message.human({\n            content: \"Show another phone\",\n          }).then(() => {\n            this.latest_dialog.push({\n              \"agent\": \"you\",\n              \"action\": \"Next\",\n              \"timestamp\": new Date().getTime()\n            })\n            instance.post(\"/api/updatemodel\", {\n              uuid: this.uuid,\n              logger: this.latest_dialog,\n              lTime: new Date().getTime(),\n            }).then((res) => {\n              this.latest_dialog = [];\n              this.current_phone = res.data.phone;\n              let msg = this.bot_msg[this.randomNum(0, 2)]\n              this.bot(msg).then(() => {\n                this.botPhoneCard(this.current_phone);\n              });\n            })\n          })\n        }\n      }\n    },\n\n// let bot suggest\n    letBotSuggest: function () {\n      let that = this;\n      this.in_crit = true;\n      botui.message.bot({\n        type: 'html',\n        loading: true,\n      }).then((index) => {\n        //直接发送请求获取推荐的列表\n        instance.post(\"/api/syscri\", {\n          uuid: this.uuid,\n          logger: this.latest_dialog,\n          lTime: new Date().getTime(),\n        }).then((res) => {\n          that.critical_data = res.data['phones']\n        }).then(() => (\n            //得到推荐列表后，开始展示\n            botui.message.update(index, {\n              loading: false,\n              content: that.critical_data['crit'][this.crit_text_point]\n            }).then(() => {\n              //先问yes no\n              botui.action.button({\n                addMessage: false,\n                human: false,\n                action: [{\n                  text: 'Yes',\n                  value: 'Yes'\n                },\n                  {\n                    text: 'No',\n                    value: 'No'\n                  }]\n              }).then((res) => {\n                //判断点了什么按钮\n                if (res.text === 'Yes') {\n                  //查询手机是什么\n                  instance.get(\"/api/phone?id=\" + this.critical_data['phones'][this.crit_phone_point[0]][this.crit_phone_point[1]]).then((res) => {\n                    this.current_phone = res.data\n                    //展示手机卡片\n                    this.PhoneCard_2btn(this.current_phone)\n                    this.crit_phone_point[1] += 1\n                  })\n                }\n                if (res.text === 'No') {\n                  this.crit_phone_point[0] += 1\n                  this.crit_phone_point[1] = 0\n                  this.crit_text_point += 1\n                  this.tryAnother()\n                }\n              })\n            })\n        ))\n      })\n    },\n\n//给系统推荐用\n    PhoneCard_2btn: function (phone) {\n      botui.message.bot({\n        type: 'phone',\n        loading: true,\n        delay: 1600,\n        content: phone,\n      }).then(() => {\n        botui.action.button({\n          addMessage: false,\n          human: false,\n          action: [{\n            text: 'Add to cart',\n            value: 'Add to cart'\n          },\n            {\n              text: 'Next item',\n              value: 'Next item'\n            }]\n        }).then((res) => {\n          //判断点了什么按钮\n          if (res.text === 'Add to cart') {\n            this.addToCart(this.current_phone);\n          }\n          if (res.text === 'Next item') {\n            this.tryAnother();\n          }\n        })\n      })\n    },\n\n//左上角tips部分\n    clickHelp: function () {\n      this.show_help = true;\n      this.help_showed_count += 1;\n    },\n\n//初始化引导语的入口\n    closeHelp: function () {\n      if (this.help_showed_count === 1) {\n        // 初始状态\n        this.bot(\"Hey, I am Alice, your assistant for buying mobile phones. Could you tell me what kinds of phones you like?\").then(() => {\n          botui.action.button({\n            addMessage: true,\n            human: false,\n            action: [{text: \"OK\", value: \"OK\"}]\n          }).then((res) => {\n            if (res.text === 'OK') {\n              this.show_preference = true;\n            }\n          })\n        })\n      }\n    },\n\n//购物车部分\n    clickCart: function () {\n      this.show_cart = true\n    },\n//跳到下一页\n    nextPage: function () {\n      instance.post('/api/page2', {\n        'page2T': new Date().getTime(),\n        'phonelist': this.phone_in_cart,\n        'uuid': localStorage.getItem('uuid')\n      }).then((res) => {\n        console.log(res)\n        this.$router.replace('/que1').catch((err) => {\n          console.log(err.message)\n        });\n      })\n    },\n\n    randomNum: function (minNum, maxNum) {\n      switch (arguments.length) {\n        case 1:\n          return parseInt(Math.random() * minNum + 1, 10);\n        case 2:\n          return parseInt(Math.random() * (maxNum - minNum + 1) + minNum, 10);\n        default:\n          return 0;\n      }\n    }\n  },\n  computed: {\n    // 计算属性的 getter\n    cart_item_count: function () {\n      return this.phone_in_cart.length;\n    }\n  }\n}\n</script>\n<style scoped>\n.avatar_back {\n  position: absolute;\n  top: 3px;\n  left: 50%;\n  margin-left: -26px;\n  z-index: 499;\n  width: 50px;\n  height: 50px;\n  border: 1px solid #c8c9cc;\n  border-radius: 46px;\n  background-color: #dcdee0;\n}\n\n.avatar {\n  position: absolute;\n  z-index: 500;\n  width: 43px;\n  height: 43px;\n  background-repeat: no-repeat;\n  background-image: url('../assets/imgs/avatar.png');\n}\n\n.avatar_ani {\n  animation: avatar 1s steps(16) infinite;\n}\n\n@keyframes avatar {\n  0% {\n    background-position: 0 0;\n  }\n  100% {\n    background-position: -688px, 0;\n  }\n}\n\n</style>\n"]}]}
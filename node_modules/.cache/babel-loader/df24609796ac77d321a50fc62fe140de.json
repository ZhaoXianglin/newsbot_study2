{"remainingRequest":"/Users/xianglin/WebstormProjects/newsbot_study2/node_modules/babel-loader/lib/index.js!/Users/xianglin/WebstormProjects/newsbot_study2/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/xianglin/WebstormProjects/newsbot_study2/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xianglin/WebstormProjects/newsbot_study2/src/views/ChatHumanHigh.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xianglin/WebstormProjects/newsbot_study2/src/views/ChatHumanHigh.vue","mtime":1661269390772},{"path":"/Users/xianglin/WebstormProjects/newsbot_study2/babel.config.js","mtime":1658830931000},{"path":"/Users/xianglin/WebstormProjects/newsbot_study2/node_modules/cache-loader/dist/cjs.js","mtime":1658830951000},{"path":"/Users/xianglin/WebstormProjects/newsbot_study2/node_modules/babel-loader/lib/index.js","mtime":1658830952000},{"path":"/Users/xianglin/WebstormProjects/newsbot_study2/node_modules/cache-loader/dist/cjs.js","mtime":1658830951000},{"path":"/Users/xianglin/WebstormProjects/newsbot_study2/node_modules/vue-loader/lib/index.js","mtime":1658830954000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBCb3RVaSBmcm9tICIuLi9jb21wb25lbnRzL0JvdFVpIjsgLy8g5a+56LGh5byV5YWlCgppbXBvcnQgeyBib3R1aSB9IGZyb20gJ0AvY29tcG9uZW50cy9Cb3RVaSc7CmltcG9ydCB7IGluc3RhbmNlIH0gZnJvbSAiQC9yZXF1ZXN0IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJDaGF0X2h1bWFuX2hpZ2giLAogIGNvbXBvbmVudHM6IHsKICAgIEJvdFVpOiBCb3RVaQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8v5o6n5Yi25Yqf6IO9CiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBtc2dfYnRuX2N0cmw6IHRydWUsCiAgICAgIHNob3dfaGVscDogdHJ1ZSwKICAgICAgc2hvd19yYXRlOiBmYWxzZSwKICAgICAgc2hvd19wcmVmZXJlbmNlOiBmYWxzZSwKICAgICAgc2hvd19uZXh0X3BhZ2U6IGZhbHNlLAogICAgICBoZWxwX3Nob3dlZF9jb3VudDogMSwKICAgICAgc2hvd19jYXJ0OiBmYWxzZSwKICAgICAgYXZhX2NzczogZmFsc2UsCiAgICAgIGF2YV9jb3VudGVyOiAwLAogICAgICBzaG93X3Bob25lX3BhZ2U6IGZhbHNlLAogICAgICB0aW1lcjogIiIsCiAgICAgIHBob25lX2J1dHRvbnM6IFt7CiAgICAgICAgdGV4dDogJ0FkZCB0byBjYXJ0JywKICAgICAgICB2YWx1ZTogJ0FkZCB0byBjYXJ0JwogICAgICB9LCB7CiAgICAgICAgdGV4dDogJ05leHQgaXRlbScsCiAgICAgICAgdmFsdWU6ICdOZXh0IGl0ZW0nCiAgICAgIH1dLAogICAgICAvL2NyaXRpY2Fs55qE5qCH6K+GCiAgICAgIGluX2NyaXQ6IGZhbHNlLAogICAgICBjcml0X3RleHRfcG9pbnQ6IDAsCiAgICAgIGNyaXRfcGhvbmVfcG9pbnQ6IFswLCAwXSwKICAgICAgLy/mlbDmja7pg6jliIYKICAgICAgdXVpZDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oInV1aWQiKSwKICAgICAgbWVzc2FnZTogIiIsCiAgICAgIGNsaWNrZWRfdHJhbnNfdXJsOiAiIiwKICAgICAgdXNlcl9wcmVmZXI6IHsKICAgICAgICBicmFuZHM6IFtdLAogICAgICAgIGJ1ZGdldDogNzAwLAogICAgICAgIHNsaW06ICIiCiAgICAgIH0sCiAgICAgIHBob25lX2luX2NhcnQ6IFtdLAogICAgICBjdXJyZW50X3Bob25lOiB7fSwKICAgICAgbGF0ZXN0X2RpYWxvZzogW10sCiAgICAgIGxhc3RfYWN0aW9uOiAiIiwKICAgICAgY3JpdGljYWxfZGF0YTogW10sCiAgICAgIHRyeV9hbm90aGVyX2NvdW50OiAwCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgLy/ku47ljaHniYfnu4Tku7bph4zpnaLojrflvpfngrnlh7vkuovku7bnmoR1cmwKICAgIGNsaWNrZWRfdXJsOiBmdW5jdGlvbiBjbGlja2VkX3VybChjaGlsZFZhbHVlKSB7CiAgICAgIHRoaXMuY2xpY2tlZF90cmFuc191cmwgPSAiaHR0cHM6Ly93d3cuY2hhdGJvdC5mYW5zOjMwMDAvP3VybD0iICsgY2hpbGRWYWx1ZTsKICAgICAgY29uc29sZS5sb2codGhpcy5jbGlja2VkX3RyYW5zX3VybCk7CiAgICAgIHRoaXMuc2hvd19waG9uZV9wYWdlID0gdHJ1ZTsKICAgIH0sCiAgICAvL+m7mOiupOWvueivnQogICAgYm90OiBmdW5jdGlvbiBib3QobXNnKSB7CiAgICAgIHJldHVybiBib3R1aS5tZXNzYWdlLmJvdCh7CiAgICAgICAgdHlwZTogJ2h0bWwnLAogICAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgICAgcGhvdG86IHJlcXVpcmUoIi4uL2Fzc2V0cy9pbWdzL2JnLnBuZyIpLAogICAgICAgIGRlbGF5OiAxNjAwLAogICAgICAgIGNvbnRlbnQ6IG1zZwogICAgICB9KTsKICAgIH0sCiAgICAvL+aPkOS6pOaJi+acuuWBj+WlvQogICAgLy/llYblk4HljaHniYcKICAgIGJvdFBob25lQ2FyZDogZnVuY3Rpb24gYm90UGhvbmVDYXJkKHBob25lKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBib3R1aS5tZXNzYWdlLmJvdCh7CiAgICAgICAgdHlwZTogJ3Bob25lJywKICAgICAgICBsb2FkaW5nOiB0cnVlLAogICAgICAgIGRlbGF5OiAxNjAwLAogICAgICAgIGNvbnRlbnQ6IHBob25lCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIGJvdHVpLmFjdGlvbi5idXR0b24oewogICAgICAgICAgYWRkTWVzc2FnZTogZmFsc2UsCiAgICAgICAgICBodW1hbjogZmFsc2UsCiAgICAgICAgICBhY3Rpb246IF90aGlzLnBob25lX2J1dHRvbnMKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIC8v5Yik5pat54K55LqG5LuA5LmI5oyJ6ZKuCiAgICAgICAgICBpZiAocmVzLnRleHQgPT09ICdBZGQgdG8gY2FydCcpIHsKICAgICAgICAgICAgX3RoaXMuYWRkVG9DYXJ0KF90aGlzLmN1cnJlbnRfcGhvbmUpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChyZXMudGV4dCA9PT0gJ05leHQgaXRlbScpIHsKICAgICAgICAgICAgX3RoaXMudHJ5QW5vdGhlcigpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvL+WIneWni+WMlueUqOaIt+WBj+WlvQogICAgc3VibWl0UHJlZmVyZW5jZTogZnVuY3Rpb24gc3VibWl0UHJlZmVyZW5jZSh2YWx1ZXMpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBpZiAodmFsdWVzLmJyYW5kcy5sZW5ndGggPCAxKSB7CiAgICAgICAgdGhpcy4kdG9hc3QoIlBsZWFzZSBzZWxlY3QgYXQgbGFzdCBvbmUgYnJhbmQuIik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgICB2YWx1ZXNbJ3V1aWQnXSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1dWlkJyk7CiAgICAgICAgdmFsdWVzWydwcmVmZXJUJ10gPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgICBpbnN0YW5jZS5wb3N0KCcvYXBpL3ByZWZlcicsIHZhbHVlcykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAvL2NvbnNvbGUubG9nKHJlcykKICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXMgPT09IDEpIHsKICAgICAgICAgICAgX3RoaXMyLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgX3RoaXMyLnNob3dfcHJlZmVyZW5jZSA9IGZhbHNlOwogICAgICAgICAgICBfdGhpczIuY3VycmVudF9waG9uZSA9IHJlcy5kYXRhLnBob25lOyAvL+a3u+WKoOaTjeS9nOiusOW9lQoKICAgICAgICAgICAgX3RoaXMyLmxhdGVzdF9kaWFsb2cucHVzaCh7CiAgICAgICAgICAgICAgImFnZW50IjogInJvYm90IiwKICAgICAgICAgICAgICAiYWN0aW9uIjogIkluaXRpYWxpemUiLAogICAgICAgICAgICAgICJ0aW1lc3RhbXAiOiBuZXcgRGF0ZSgpLmdldFRpbWUoKQogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIF90aGlzMi5ib3QocmVzLmRhdGEubXNnKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBfdGhpczIuYm90UGhvbmVDYXJkKF90aGlzMi5jdXJyZW50X3Bob25lKTsKCiAgICAgICAgICAgICAgX3RoaXMyLm1zZ19idG5fY3RybCA9IGZhbHNlOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzMi5sb2FkaW5nID0gZmFsc2U7CgogICAgICAgICAgICBfdGhpczIuJHRvYXN0KCJQbGVhc2UgcmVhZCBhbmQgYWNjZXB0IHRoZSBpbmZvcm1lZCBjb25zZW50IGZpcnN0LiIpOwogICAgICAgICAgfQogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTsKICAgICAgICAgIF90aGlzMi5sb2FkaW5nID0gZmFsc2U7CgogICAgICAgICAgX3RoaXMyLiR0b2FzdCgiTmV0d29yayBlcnJvciwgcGxlYXNlIHRyeSBhZ2Fpbi4iKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIC8v5Y+R6YCB55So5oi35raI5oGvCiAgICBzZW5kTWVzc2FnZTogZnVuY3Rpb24gc2VuZE1lc3NhZ2UoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdGhpcy5sYXN0X2FjdGlvbiA9ICdzZW5kTWVzc2FnZSc7CiAgICAgIGJvdHVpLmFjdGlvbi5oaWRlKCk7CgogICAgICBpZiAodGhpcy5pbl9jcml0KSB7CiAgICAgICAgdGhpcy5pbl9jcml0ID0gZmFsc2U7CiAgICAgICAgdGhpcy5jcml0X3RleHRfcG9pbnQgPSAwOwogICAgICAgIHRoaXMuY3JpdF9waG9uZV9wb2ludCA9IFswLCAwXTsKICAgICAgfSAvL+WFiOemgeeUqOaMiemSrgoKCiAgICAgIGlmICh0aGlzLm1lc3NhZ2UubGVuZ3RoID49IDIpIHsKICAgICAgICAvL+WPr+S7peWPkemAgQogICAgICAgIHRoaXMubXNnX2J0bl9jdHJsID0gdHJ1ZTsKICAgICAgICBib3R1aS5tZXNzYWdlLmh1bWFuKHsKICAgICAgICAgIGNvbnRlbnQ6IHRoaXMubWVzc2FnZQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMzLmxhdGVzdF9kaWFsb2cucHVzaCh7CiAgICAgICAgICAgICJhZ2VudCI6ICJ5b3UiLAogICAgICAgICAgICAidGV4dCI6IF90aGlzMy5tZXNzYWdlLAogICAgICAgICAgICAibW9kYWxpdHkiOiAidHlwaW5nIiwKICAgICAgICAgICAgImFjdGlvbiI6ICJVc2VyX0NyaXRpcXVlIiwKICAgICAgICAgICAgImNyaXRpcXVlIjogW10sCiAgICAgICAgICAgICJjcml0aXF1ZWRfaXRlbSI6IF90aGlzMy5jdXJyZW50X3Bob25lLmlkLAogICAgICAgICAgICAidGltZXN0YW1wIjogbmV3IERhdGUoKS5nZXRUaW1lKCkKICAgICAgICAgIH0pOwoKICAgICAgICAgIGluc3RhbmNlLnBvc3QoJy9hcGkvdXNlck1lc3NhZ2UnLCB7CiAgICAgICAgICAgIG1zZ1Q6IG5ldyBEYXRlKCkuZ2V0VGltZSgpLAogICAgICAgICAgICBtZXNzYWdlOiBfdGhpczMubWVzc2FnZSwKICAgICAgICAgICAgbG9nZ2VyOiBfdGhpczMubGF0ZXN0X2RpYWxvZywKICAgICAgICAgICAgdXVpZDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3V1aWQnKQogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICAgIF90aGlzMy5jdXJyZW50X3Bob25lID0gcmVzLmRhdGEucGhvbmU7CiAgICAgICAgICAgIF90aGlzMy5sYXRlc3RfZGlhbG9nID0gW107CgogICAgICAgICAgICBpZiAocmVzLmRhdGFbJ21zZyddLmxlbmd0aCA9PT0gMikgewogICAgICAgICAgICAgIF90aGlzMy5ib3QocmVzLmRhdGEubXNnWzBdKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIF90aGlzMy5ib3QocmVzLmRhdGEubXNnWzFdKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMzLmJvdFBob25lQ2FyZChfdGhpczMuY3VycmVudF9waG9uZSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBfdGhpczMuYm90KHJlcy5kYXRhLm1zZ1swXSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBfdGhpczMuYm90UGhvbmVDYXJkKF90aGlzMy5jdXJyZW50X3Bob25lKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX3RoaXMzLm1zZ19idG5fY3RybCA9IGZhbHNlOwogICAgICAgICAgICBfdGhpczMubWVzc2FnZSA9IG51bGw7CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzMy5tc2dfYnRuX2N0cmwgPSBmYWxzZTsKCiAgICAgICAgICAgIF90aGlzMy4kdG9hc3QoJ1BsZWFzZSB0cnkgYWdhaW4uJyk7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLm1zZ19idG5fY3RybCA9IGZhbHNlOwogICAgICAgIHRoaXMuJHRvYXN0KCdQbGVhc2UgZW50ZXIgbW9yZSBpbmZvcm1hdGlvbi4nKTsKICAgICAgfQogICAgfSwKICAgIC8v5Yqg5YWl6LSt54mp6L2mCiAgICBhZGRUb0NhcnQ6IGZ1bmN0aW9uIGFkZFRvQ2FydCgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB0aGlzLmxhc3RfYWN0aW9uID0gImFkZFRvQ2FydCI7CiAgICAgIHRoaXMuYm90KCJQbGVhc2UgcmF0ZSB5b3VyIGxpa2VkIHBob25lLiIpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNC5zaG93X3JhdGUgPSB0cnVlOwogICAgICB9KTsKICAgICAgdGhpcy5sYXRlc3RfZGlhbG9nLnB1c2goewogICAgICAgICJhZ2VudCI6ICJ5b3UiLAogICAgICAgICJhY3Rpb24iOiAiQWNjZXB0X0l0ZW0iLAogICAgICAgICJ0aW1lc3RhbXAiOiBuZXcgRGF0ZSgpLmdldFRpbWUoKQogICAgICB9KTsKICAgIH0sCiAgICAvL+aJi+acuuivhOWIhgogICAgc3VibWl0UGhvbmVSYXRlOiBmdW5jdGlvbiBzdWJtaXRQaG9uZVJhdGUoKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgY29uc29sZS5sb2codGhpcy5jcml0X3Bob25lX3BvaW50KTsKICAgICAgdGhpcy5sYXN0X2FjdGlvbiA9ICdzdWJtaXRQaG9uZVJhdGUnOwoKICAgICAgaWYgKHRoaXMuY3VycmVudF9waG9uZS5yYXRlKSB7CiAgICAgICAgdGhpcy5waG9uZV9pbl9jYXJ0LnB1c2godGhpcy5jdXJyZW50X3Bob25lKTsKICAgICAgICB0aGlzLnNob3dfcmF0ZSA9IGZhbHNlOwoKICAgICAgICBpZiAodGhpcy5waG9uZV9pbl9jYXJ0Lmxlbmd0aCA9PT0gMykgewogICAgICAgICAgdGhpcy5zaG93X25leHRfcGFnZSA9IHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmICh0aGlzLmluX2NyaXQpIHsKICAgICAgICAgICAgaWYgKHRoaXMuY3JpdF90ZXh0X3BvaW50IDwgMyAmJiB0aGlzLmNyaXRfcGhvbmVfcG9pbnRbMV0gPT09IDMpIHsKICAgICAgICAgICAgICB0aGlzLmNyaXRfcGhvbmVfcG9pbnRbMV0gPSAwOwogICAgICAgICAgICAgIHRoaXMuY3JpdF9waG9uZV9wb2ludFswXSArPSAxOwogICAgICAgICAgICAgIHRoaXMuY3JpdF90ZXh0X3BvaW50ICs9IDE7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICh0aGlzLmNyaXRfdGV4dF9wb2ludCA8IDMgJiYgdGhpcy5jcml0X3Bob25lX3BvaW50WzFdID09PSAwKSB7CiAgICAgICAgICAgICAgLy/pnIDopoFib3Qg6K+06K+dCiAgICAgICAgICAgICAgYm90dWkubWVzc2FnZS5ib3QoewogICAgICAgICAgICAgICAgdHlwZTogJ2h0bWwnLAogICAgICAgICAgICAgICAgbG9hZGluZzogdHJ1ZSwKICAgICAgICAgICAgICAgIGRlbGF5OiAxNjAwLAogICAgICAgICAgICAgICAgcGhvdG86IHJlcXVpcmUoIi4uL2Fzc2V0cy9pbWdzL2JnLnBuZyIpLAogICAgICAgICAgICAgICAgY29udGVudDogdGhpcy5jcml0aWNhbF9kYXRhWydjcml0J11bdGhpcy5jcml0X3RleHRfcG9pbnRdCiAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBib3R1aS5hY3Rpb24uYnV0dG9uKHsKICAgICAgICAgICAgICAgICAgYWRkTWVzc2FnZTogZmFsc2UsCiAgICAgICAgICAgICAgICAgIGh1bWFuOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgYWN0aW9uOiBbewogICAgICAgICAgICAgICAgICAgIHRleHQ6ICdZZXMnLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnWWVzJwogICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ05vJywKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJ05vJwogICAgICAgICAgICAgICAgICB9XQogICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgIC8v5Yik5pat54K55LqG5LuA5LmI5oyJ6ZKuCiAgICAgICAgICAgICAgICAgIGlmIChyZXMudGV4dCA9PT0gJ1llcycpIHsKICAgICAgICAgICAgICAgICAgICAvL+afpeivouaJi+acuuaYr+S7gOS5iAogICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLmdldCgiL2FwaS9waG9uZT9pZD0iICsgX3RoaXM1LmNyaXRpY2FsX2RhdGFbJ3Bob25lcyddW190aGlzNS5jcml0X3Bob25lX3BvaW50WzBdXVtfdGhpczUuY3JpdF9waG9uZV9wb2ludFsxXV0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgICAgX3RoaXM1LmN1cnJlbnRfcGhvbmUgPSByZXMuZGF0YTsgLy/lsZXnpLrmiYvmnLrljaHniYcKCiAgICAgICAgICAgICAgICAgICAgICBfdGhpczUuUGhvbmVDYXJkXzJidG4oX3RoaXM1LmN1cnJlbnRfcGhvbmUpOwoKICAgICAgICAgICAgICAgICAgICAgIF90aGlzNS5jcml0X3Bob25lX3BvaW50WzFdICs9IDE7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIGlmIChyZXMudGV4dCA9PT0gJ05vJykgewogICAgICAgICAgICAgICAgICAgIF90aGlzNS5jcml0X3Bob25lX3BvaW50WzBdICs9IDE7CiAgICAgICAgICAgICAgICAgICAgX3RoaXM1LmNyaXRfcGhvbmVfcG9pbnRbMV0gPSAwOwogICAgICAgICAgICAgICAgICAgIF90aGlzNS5jcml0X3RleHRfcG9pbnQgKz0gMTsKCiAgICAgICAgICAgICAgICAgICAgX3RoaXM1LnRyeUFub3RoZXIoKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5jcml0X3Bob25lX3BvaW50WzFdIDwgMyAmJiB0aGlzLmNyaXRfdGV4dF9wb2ludCA8IDMpIHsKICAgICAgICAgICAgICBpbnN0YW5jZS5nZXQoIi9hcGkvcGhvbmU/aWQ9IiArIHRoaXMuY3JpdGljYWxfZGF0YVsncGhvbmVzJ11bdGhpcy5jcml0X3Bob25lX3BvaW50WzBdXVt0aGlzLmNyaXRfcGhvbmVfcG9pbnRbMV1dKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgIF90aGlzNS5jdXJyZW50X3Bob25lID0gcmVzLmRhdGE7CiAgICAgICAgICAgICAgICBfdGhpczUuY3JpdF9waG9uZV9wb2ludFsxXSArPSAxOwoKICAgICAgICAgICAgICAgIF90aGlzNS5QaG9uZUNhcmRfMmJ0bihfdGhpczUuY3VycmVudF9waG9uZSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgLy/lhajpg73lsZXnpLrlrozkuobvvIznu5nkuIDkuKrmlrDnmoTmjqjojZAKICAgICAgICAgICAgICB0aGlzLmluX2NyaXQgPSBmYWxzZTsKICAgICAgICAgICAgICB0aGlzLmNyaXRfdGV4dF9wb2ludCA9IDA7CiAgICAgICAgICAgICAgdGhpcy5jcml0X3Bob25lX3BvaW50ID0gWzAsIDBdOwogICAgICAgICAgICAgIGluc3RhbmNlLnBvc3QoIi9hcGkvdXBkYXRlbW9kZWwiLCB7CiAgICAgICAgICAgICAgICB1dWlkOiB0aGlzLnV1aWQsCiAgICAgICAgICAgICAgICBsb2dnZXI6IHRoaXMubGF0ZXN0X2RpYWxvZywKICAgICAgICAgICAgICAgIGxUaW1lOiBuZXcgRGF0ZSgpLmdldFRpbWUoKQogICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgX3RoaXM1LmxhdGVzdF9kaWFsb2cgPSBbXTsKICAgICAgICAgICAgICAgIF90aGlzNS5jdXJyZW50X3Bob25lID0gcmVzLmRhdGEucGhvbmU7CgogICAgICAgICAgICAgICAgX3RoaXM1LmJvdChyZXMuZGF0YS5tc2cpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBfdGhpczUuYm90UGhvbmVDYXJkKF90aGlzNS5jdXJyZW50X3Bob25lKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmluX2NyaXQgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5jcml0X3RleHRfcG9pbnQgPSAwOwogICAgICAgICAgICB0aGlzLmNyaXRfcGhvbmVfcG9pbnQgPSBbMCwgMF07CiAgICAgICAgICAgIGluc3RhbmNlLnBvc3QoIi9hcGkvdXBkYXRlbW9kZWwiLCB7CiAgICAgICAgICAgICAgdXVpZDogdGhpcy51dWlkLAogICAgICAgICAgICAgIGxvZ2dlcjogdGhpcy5sYXRlc3RfZGlhbG9nLAogICAgICAgICAgICAgIGxUaW1lOiBuZXcgRGF0ZSgpLmdldFRpbWUoKQogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICBfdGhpczUubGF0ZXN0X2RpYWxvZyA9IFtdOwogICAgICAgICAgICAgIF90aGlzNS5jdXJyZW50X3Bob25lID0gcmVzLmRhdGEucGhvbmU7CgogICAgICAgICAgICAgIF90aGlzNS5ib3QocmVzLmRhdGEubXNnKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIF90aGlzNS5ib3RQaG9uZUNhcmQoX3RoaXM1LmN1cnJlbnRfcGhvbmUpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kdG9hc3QoIlBsZWFzZSByYXRlIHRoaXMgcGhvbmUgZmlyc3QuIik7CiAgICAgIH0KICAgIH0sCiAgICAvL+WGjeadpeS4gOS4quaOqOiNkAogICAgdHJ5QW5vdGhlcjogZnVuY3Rpb24gdHJ5QW5vdGhlcigpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICBjb25zb2xlLmxvZyh0aGlzLmNyaXRfcGhvbmVfcG9pbnQpOwoKICAgICAgaWYgKHRoaXMuaW5fY3JpdCkgewogICAgICAgIGlmICh0aGlzLmNyaXRfdGV4dF9wb2ludCA8IDMgJiYgdGhpcy5jcml0X3Bob25lX3BvaW50WzFdID09PSAzKSB7CiAgICAgICAgICB0aGlzLmNyaXRfcGhvbmVfcG9pbnRbMV0gPSAwOwogICAgICAgICAgdGhpcy5jcml0X3Bob25lX3BvaW50WzBdICs9IDE7CiAgICAgICAgICB0aGlzLmNyaXRfdGV4dF9wb2ludCArPSAxOwogICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMuY3JpdF90ZXh0X3BvaW50IDwgMyAmJiB0aGlzLmNyaXRfcGhvbmVfcG9pbnRbMV0gPT09IDApIHsKICAgICAgICAgIC8v6ZyA6KaBYm90IOivtOivnQogICAgICAgICAgYm90dWkubWVzc2FnZS5ib3QoewogICAgICAgICAgICB0eXBlOiAnaHRtbCcsCiAgICAgICAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgICAgICAgIGRlbGF5OiAxNjAwLAogICAgICAgICAgICBwaG90bzogcmVxdWlyZSgiLi4vYXNzZXRzL2ltZ3MvYmcucG5nIiksCiAgICAgICAgICAgIGNvbnRlbnQ6IHRoaXMuY3JpdGljYWxfZGF0YVsnY3JpdCddW3RoaXMuY3JpdF90ZXh0X3BvaW50XQogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGJvdHVpLmFjdGlvbi5idXR0b24oewogICAgICAgICAgICAgIGFkZE1lc3NhZ2U6IGZhbHNlLAogICAgICAgICAgICAgIGh1bWFuOiBmYWxzZSwKICAgICAgICAgICAgICBhY3Rpb246IFt7CiAgICAgICAgICAgICAgICB0ZXh0OiAnWWVzJywKICAgICAgICAgICAgICAgIHZhbHVlOiAnWWVzJwogICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIHRleHQ6ICdObycsCiAgICAgICAgICAgICAgICB2YWx1ZTogJ05vJwogICAgICAgICAgICAgIH1dCiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIC8v5Yik5pat54K55LqG5LuA5LmI5oyJ6ZKuCiAgICAgICAgICAgICAgaWYgKHJlcy50ZXh0ID09PSAnWWVzJykgewogICAgICAgICAgICAgICAgLy/mn6Xor6LmiYvmnLrmmK/ku4DkuYgKICAgICAgICAgICAgICAgIGluc3RhbmNlLmdldCgiL2FwaS9waG9uZT9pZD0iICsgX3RoaXM2LmNyaXRpY2FsX2RhdGFbJ3Bob25lcyddW190aGlzNi5jcml0X3Bob25lX3BvaW50WzBdXVtfdGhpczYuY3JpdF9waG9uZV9wb2ludFsxXV0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICBfdGhpczYuY3VycmVudF9waG9uZSA9IHJlcy5kYXRhOyAvL+WxleekuuaJi+acuuWNoeeJhwoKICAgICAgICAgICAgICAgICAgX3RoaXM2LlBob25lQ2FyZF8yYnRuKF90aGlzNi5jdXJyZW50X3Bob25lKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzNi5jcml0X3Bob25lX3BvaW50WzFdICs9IDE7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmIChyZXMudGV4dCA9PT0gJ05vJykgewogICAgICAgICAgICAgICAgX3RoaXM2LmNyaXRfcGhvbmVfcG9pbnRbMF0gKz0gMTsKICAgICAgICAgICAgICAgIF90aGlzNi5jcml0X3Bob25lX3BvaW50WzFdID0gMDsKICAgICAgICAgICAgICAgIF90aGlzNi5jcml0X3RleHRfcG9pbnQgKz0gMTsKCiAgICAgICAgICAgICAgICBfdGhpczYudHJ5QW5vdGhlcigpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY3JpdF9waG9uZV9wb2ludFsxXSA8IDMgJiYgdGhpcy5jcml0X3RleHRfcG9pbnQgPCAzKSB7CiAgICAgICAgICBpbnN0YW5jZS5nZXQoIi9hcGkvcGhvbmU/aWQ9IiArIHRoaXMuY3JpdGljYWxfZGF0YVsncGhvbmVzJ11bdGhpcy5jcml0X3Bob25lX3BvaW50WzBdXVt0aGlzLmNyaXRfcGhvbmVfcG9pbnRbMV1dKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgX3RoaXM2LmN1cnJlbnRfcGhvbmUgPSByZXMuZGF0YTsKICAgICAgICAgICAgX3RoaXM2LmNyaXRfcGhvbmVfcG9pbnRbMV0gKz0gMTsKCiAgICAgICAgICAgIF90aGlzNi5QaG9uZUNhcmRfMmJ0bihfdGhpczYuY3VycmVudF9waG9uZSk7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy/lhajpg73lsZXnpLrlrozkuobvvIznu5nkuIDkuKrmlrDnmoTmjqjojZAKICAgICAgICAgIHRoaXMuaW5fY3JpdCA9IGZhbHNlOwogICAgICAgICAgdGhpcy5jcml0X3RleHRfcG9pbnQgPSAwOwogICAgICAgICAgdGhpcy5jcml0X3Bob25lX3BvaW50ID0gWzAsIDBdOwogICAgICAgICAgaW5zdGFuY2UucG9zdCgiL2FwaS91cGRhdGVtb2RlbCIsIHsKICAgICAgICAgICAgdXVpZDogdGhpcy51dWlkLAogICAgICAgICAgICBsb2dnZXI6IHRoaXMubGF0ZXN0X2RpYWxvZywKICAgICAgICAgICAgbFRpbWU6IG5ldyBEYXRlKCkuZ2V0VGltZSgpCiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgX3RoaXM2LmxhdGVzdF9kaWFsb2cgPSBbXTsKICAgICAgICAgICAgX3RoaXM2LmN1cnJlbnRfcGhvbmUgPSByZXMuZGF0YS5waG9uZTsKCiAgICAgICAgICAgIF90aGlzNi5ib3QocmVzLmRhdGEubXNnKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBfdGhpczYuYm90UGhvbmVDYXJkKF90aGlzNi5jdXJyZW50X3Bob25lKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKHRoaXMudHJ5X2Fub3RoZXJfY291bnQgPT09IDApIHsKICAgICAgICAgIHRoaXMudHJ5X2Fub3RoZXJfY291bnQgKz0gMTsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLmxhc3RfYWN0aW9uID09PSAndHJ5QW5vdGhlcicpIHsKICAgICAgICAgIHRoaXMudHJ5X2Fub3RoZXJfY291bnQgKz0gMTsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLnRyeV9hbm90aGVyX2NvdW50ID09PSAzKSB7CiAgICAgICAgICB0aGlzLmxhc3RfYWN0aW9uID0gImxldEJvdFN1Z2dlY3QiOwogICAgICAgICAgdGhpcy50cnlfYW5vdGhlcl9jb3VudCA9IDA7CiAgICAgICAgICB0aGlzLmxldEJvdFN1Z2dlc3QoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5sYXN0X2FjdGlvbiA9ICJ0cnlBbm90aGVyIjsKICAgICAgICAgIGJvdHVpLm1lc3NhZ2UuaHVtYW4oewogICAgICAgICAgICBjb250ZW50OiAiU2hvdyBhbm90aGVyIHBob25lIgogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzNi5sYXRlc3RfZGlhbG9nLnB1c2goewogICAgICAgICAgICAgICJhZ2VudCI6ICJ5b3UiLAogICAgICAgICAgICAgICJhY3Rpb24iOiAiTmV4dCIsCiAgICAgICAgICAgICAgInRpbWVzdGFtcCI6IG5ldyBEYXRlKCkuZ2V0VGltZSgpCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgaW5zdGFuY2UucG9zdCgiL2FwaS91cGRhdGVtb2RlbCIsIHsKICAgICAgICAgICAgICB1dWlkOiBfdGhpczYudXVpZCwKICAgICAgICAgICAgICBsb2dnZXI6IF90aGlzNi5sYXRlc3RfZGlhbG9nLAogICAgICAgICAgICAgIGxUaW1lOiBuZXcgRGF0ZSgpLmdldFRpbWUoKQogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICBfdGhpczYubGF0ZXN0X2RpYWxvZyA9IFtdOwogICAgICAgICAgICAgIF90aGlzNi5jdXJyZW50X3Bob25lID0gcmVzLmRhdGEucGhvbmU7CgogICAgICAgICAgICAgIF90aGlzNi5ib3QocmVzLmRhdGEubXNnKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIF90aGlzNi5ib3RQaG9uZUNhcmQoX3RoaXM2LmN1cnJlbnRfcGhvbmUpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIC8vIGxldCBib3Qgc3VnZ2VzdAogICAgbGV0Qm90U3VnZ2VzdDogZnVuY3Rpb24gbGV0Qm90U3VnZ2VzdCgpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CgogICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgIHRoaXMuaW5fY3JpdCA9IHRydWU7CiAgICAgIGJvdHVpLm1lc3NhZ2UuYm90KHsKICAgICAgICB0eXBlOiAnaHRtbCcsCiAgICAgICAgcGhvdG86IHJlcXVpcmUoIi4uL2Fzc2V0cy9pbWdzL2JnLnBuZyIpLAogICAgICAgIGxvYWRpbmc6IHRydWUKICAgICAgfSkudGhlbihmdW5jdGlvbiAoaW5kZXgpIHsKICAgICAgICAvL+ebtOaOpeWPkemAgeivt+axguiOt+WPluaOqOiNkOeahOWIl+ihqAogICAgICAgIGluc3RhbmNlLnBvc3QoIi9hcGkvc3lzY3JpIiwgewogICAgICAgICAgdXVpZDogX3RoaXM3LnV1aWQsCiAgICAgICAgICBsb2dnZXI6IF90aGlzNy5sYXRlc3RfZGlhbG9nLAogICAgICAgICAgbFRpbWU6IG5ldyBEYXRlKCkuZ2V0VGltZSgpCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICB0aGF0LmNyaXRpY2FsX2RhdGEgPSByZXMuZGF0YVsncGhvbmVzJ107CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gKC8v5b6X5Yiw5o6o6I2Q5YiX6KGo5ZCO77yM5byA5aeL5bGV56S6CiAgICAgICAgICAgIGJvdHVpLm1lc3NhZ2UudXBkYXRlKGluZGV4LCB7CiAgICAgICAgICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgICAgICAgICAgcGhvdG86IHJlcXVpcmUoIi4uL2Fzc2V0cy9pbWdzL2JnLnBuZyIpLAogICAgICAgICAgICAgIGNvbnRlbnQ6IHRoYXQuY3JpdGljYWxfZGF0YVsnY3JpdCddW190aGlzNy5jcml0X3RleHRfcG9pbnRdCiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIC8v5YWI6ZeueWVzIG5vCiAgICAgICAgICAgICAgYm90dWkuYWN0aW9uLmJ1dHRvbih7CiAgICAgICAgICAgICAgICBhZGRNZXNzYWdlOiBmYWxzZSwKICAgICAgICAgICAgICAgIGh1bWFuOiBmYWxzZSwKICAgICAgICAgICAgICAgIGFjdGlvbjogW3sKICAgICAgICAgICAgICAgICAgdGV4dDogJ1llcycsCiAgICAgICAgICAgICAgICAgIHZhbHVlOiAnWWVzJwogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICB0ZXh0OiAnTm8nLAogICAgICAgICAgICAgICAgICB2YWx1ZTogJ05vJwogICAgICAgICAgICAgICAgfV0KICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgIC8v5Yik5pat54K55LqG5LuA5LmI5oyJ6ZKuCiAgICAgICAgICAgICAgICBpZiAocmVzLnRleHQgPT09ICdZZXMnKSB7CiAgICAgICAgICAgICAgICAgIC8v5p+l6K+i5omL5py65piv5LuA5LmICiAgICAgICAgICAgICAgICAgIGluc3RhbmNlLmdldCgiL2FwaS9waG9uZT9pZD0iICsgX3RoaXM3LmNyaXRpY2FsX2RhdGFbJ3Bob25lcyddW190aGlzNy5jcml0X3Bob25lX3BvaW50WzBdXVtfdGhpczcuY3JpdF9waG9uZV9wb2ludFsxXV0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICAgIF90aGlzNy5jdXJyZW50X3Bob25lID0gcmVzLmRhdGE7IC8v5bGV56S65omL5py65Y2h54mHCgogICAgICAgICAgICAgICAgICAgIF90aGlzNy5QaG9uZUNhcmRfMmJ0bihfdGhpczcuY3VycmVudF9waG9uZSk7CgogICAgICAgICAgICAgICAgICAgIF90aGlzNy5jcml0X3Bob25lX3BvaW50WzFdICs9IDE7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChyZXMudGV4dCA9PT0gJ05vJykgewogICAgICAgICAgICAgICAgICBfdGhpczcuY3JpdF9waG9uZV9wb2ludFswXSArPSAxOwogICAgICAgICAgICAgICAgICBfdGhpczcuY3JpdF9waG9uZV9wb2ludFsxXSA9IDA7CiAgICAgICAgICAgICAgICAgIF90aGlzNy5jcml0X3RleHRfcG9pbnQgKz0gMTsKCiAgICAgICAgICAgICAgICAgIF90aGlzNy50cnlBbm90aGVyKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICApOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvL+e7meezu+e7n+aOqOiNkOeUqAogICAgUGhvbmVDYXJkXzJidG46IGZ1bmN0aW9uIFBob25lQ2FyZF8yYnRuKHBob25lKSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwoKICAgICAgYm90dWkubWVzc2FnZS5ib3QoewogICAgICAgIHR5cGU6ICdwaG9uZScsCiAgICAgICAgbG9hZGluZzogdHJ1ZSwKICAgICAgICBkZWxheTogMTYwMCwKICAgICAgICBjb250ZW50OiBwaG9uZQogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBib3R1aS5hY3Rpb24uYnV0dG9uKHsKICAgICAgICAgIGFkZE1lc3NhZ2U6IGZhbHNlLAogICAgICAgICAgaHVtYW46IGZhbHNlLAogICAgICAgICAgYWN0aW9uOiBbewogICAgICAgICAgICB0ZXh0OiAnQWRkIHRvIGNhcnQnLAogICAgICAgICAgICB2YWx1ZTogJ0FkZCB0byBjYXJ0JwogICAgICAgICAgfSwgewogICAgICAgICAgICB0ZXh0OiAnTmV4dCBpdGVtJywKICAgICAgICAgICAgdmFsdWU6ICdOZXh0IGl0ZW0nCiAgICAgICAgICB9XQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgLy/liKTmlq3ngrnkuobku4DkuYjmjInpkq4KICAgICAgICAgIGlmIChyZXMudGV4dCA9PT0gJ0FkZCB0byBjYXJ0JykgewogICAgICAgICAgICBfdGhpczguYWRkVG9DYXJ0KF90aGlzOC5jdXJyZW50X3Bob25lKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAocmVzLnRleHQgPT09ICdOZXh0IGl0ZW0nKSB7CiAgICAgICAgICAgIF90aGlzOC50cnlBbm90aGVyKCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8v5bem5LiK6KeSdGlwc+mDqOWIhgogICAgY2xpY2tIZWxwOiBmdW5jdGlvbiBjbGlja0hlbHAoKSB7CiAgICAgIHRoaXMuc2hvd19oZWxwID0gdHJ1ZTsKICAgICAgdGhpcy5oZWxwX3Nob3dlZF9jb3VudCArPSAxOwogICAgfSwKICAgIC8v5Yid5aeL5YyW5byV5a+86K+t55qE5YWl5Y+jCiAgICBjbG9zZUhlbHA6IGZ1bmN0aW9uIGNsb3NlSGVscCgpIHsKICAgICAgdmFyIF90aGlzOSA9IHRoaXM7CgogICAgICBpZiAodGhpcy5oZWxwX3Nob3dlZF9jb3VudCA9PT0gMSkgewogICAgICAgIC8vIOWIneWni+eKtuaAgQogICAgICAgIHRoaXMuYm90KCJIaSEgSeKAmW0gQWxleCwgYSBzYWxlcyBhc3NvY2lhdGUgd29ya2luZyBhdCBQaG9uZXNob3AuIikudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXM5LmJvdCgiSeKAmW0gaGFwcHkgdG8gaGVscCB5b3Ugd2l0aCB5b3VyIHB1cmNoYXNlLiBXZSBoYXZlIGFsbCBkaWZmZXJlbnQgdHlwZXMgb2YgbW9iaWxlIHBob25lcy4iKTsKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBfdGhpczkuYm90KCJJbiBvcmRlciB0byBlbnN1cmUgdGhhdCBJIG1ha2UgdGhlIG1vc3Qgc3VpdGFibGUgcmVjb21tZW5kYXRpb25zIGZvciB5b3UsIEnigJlkIGxpa2UgdG8gYXNrIHlvdSBzb21lIHF1ZXN0aW9ucy4iKTsKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBfdGhpczkuYm90KCJXaGljaCBicmFuZCBkbyB5b3UgcHJlZmVyPyIpOwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIGJvdHVpLmFjdGlvbi5idXR0b24oewogICAgICAgICAgICBhZGRNZXNzYWdlOiB0cnVlLAogICAgICAgICAgICBodW1hbjogZmFsc2UsCiAgICAgICAgICAgIGFjdGlvbjogW3sKICAgICAgICAgICAgICB0ZXh0OiAiQXBwbGUiLAogICAgICAgICAgICAgIHZhbHVlOiAiQXBwbGUiCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICB0ZXh0OiAiSHVhd2VpIiwKICAgICAgICAgICAgICB2YWx1ZTogIkh1YXdlaSIKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgIHRleHQ6ICJTYW1zdW5nIiwKICAgICAgICAgICAgICB2YWx1ZTogIlNhbXN1bmciCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICB0ZXh0OiAiT3RoZXJzIiwKICAgICAgICAgICAgICB2YWx1ZTogIk90aGVycyIKICAgICAgICAgICAgfV0KICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICBfdGhpczkudXNlcl9wcmVmZXIuYnJhbmRzLnB1c2gocmVzLnZhbHVlKTsKCiAgICAgICAgICAgIHZhciBtc2cgPSAiIjsKCiAgICAgICAgICAgIGlmIChyZXMudmFsdWUgPT09ICdBcHBsZScpIHsKICAgICAgICAgICAgICBtc2cgPSAiT2theSwgeW914oCZZCBsaWtlIHRvIGJ1eSBhbiBpUGhvbmUgZm9yIGEgZ2lmdC4iOwogICAgICAgICAgICB9IGVsc2UgaWYgKHJlcy52YWx1ZSA9PT0gIk90aGVycyIpIHsKICAgICAgICAgICAgICBtc2cgPSAiT2theSwgeW914oCZZCBsaWtlIHRvIGJ1eSBhIHBob25lIGZyb20gb3RoZXIgYnJhbmRzIGFzIGEgZ2lmdC4iOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIG1zZyA9ICJPa2F5LCB5b3XigJlkIGxpa2UgdG8gYnV5IGEgcGhvbmUgZnJvbSAiICsgcmVzLnZhbHVlICsgIiBhcyBhIGdpZnQuIjsKICAgICAgICAgICAgfSAvL2NvbnNvbGUubG9nKHRoaXMudXNlcl9wcmVmZXIpCgoKICAgICAgICAgICAgX3RoaXM5LmJvdChtc2cpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBfdGhpczkuYm90KCIgR3JlYXQgY2hvaWNlISIpOwogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXM5LmJvdCgiV2hhdCBpcyB5b3VyIG1heGltdW0gYnVkZ2V0IGZvciBidXlpbmcgYSBwaG9uZT8iKTsKICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGJvdHVpLmFjdGlvbi5idXR0b24oewogICAgICAgICAgICAgICAgYWRkTWVzc2FnZTogdHJ1ZSwKICAgICAgICAgICAgICAgIGh1bWFuOiBmYWxzZSwKICAgICAgICAgICAgICAgIGFjdGlvbjogW3sKICAgICAgICAgICAgICAgICAgdGV4dDogIjMwMCIsCiAgICAgICAgICAgICAgICAgIHZhbHVlOiAiMzAwIgogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICB0ZXh0OiAiNjAwIiwKICAgICAgICAgICAgICAgICAgdmFsdWU6ICI2MDAiCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgIHRleHQ6ICIxMDAwIiwKICAgICAgICAgICAgICAgICAgdmFsdWU6ICIxMDAwIgogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICB0ZXh0OiAiT3ZlciAxMDAwIiwKICAgICAgICAgICAgICAgICAgdmFsdWU6ICJPdmVyICQxMDAwIgogICAgICAgICAgICAgICAgfV0KICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgIF90aGlzOS51c2VyX3ByZWZlci5idWRnZXQgPSByZXMudmFsdWU7CiAgICAgICAgICAgICAgICB2YXIgcHJpY2UgPSAiIjsKICAgICAgICAgICAgICAgIHZhciBicmFuZCA9ICIiOwoKICAgICAgICAgICAgICAgIGlmIChyZXMudmFsdWUgPT09ICdPdmVyICQxMDAwJykgewogICAgICAgICAgICAgICAgICBwcmljZSA9ICJtb3JlIHRoYW4gJDEwMDAiOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgcHJpY2UgPSAibGVzcyB0aGFuICQiLmNvbmNhdChyZXMudmFsdWUpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmIChfdGhpczkudXNlcl9wcmVmZXIuYnJhbmRzWzBdID09PSAnQXBwbGUnKSB7CiAgICAgICAgICAgICAgICAgIGJyYW5kID0gImFuIGlQaG9uZSI7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzOS51c2VyX3ByZWZlci5icmFuZHNbMF0gPT09ICdPdGhlcnMnKSB7CiAgICAgICAgICAgICAgICAgIGJyYW5kID0gImEgcGhvbmUgZnJvbSBvdGhlciBicmFuZHMiOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgYnJhbmQgPSAiYSBwaG9uZSBmcm9tICIuY29uY2F0KF90aGlzOS51c2VyX3ByZWZlci5icmFuZHNbMF0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHZhciBtc2cgPSAiT2theSwgeW91XHUyMDE5ZCBsaWtlIHRvIGJ1eSAiLmNvbmNhdChicmFuZCwgIiB0aGF0IGNvc3RzICIpLmNvbmNhdChwcmljZSwgIiBhcyBhIGdpZnQuIExldCBtZSBhc2sgYW5vdGhlciBxdWVzdGlvbi4iKTsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczkuYm90KG1zZyk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBfdGhpczkuYm90KCJBcmUgeW91IGxvb2tpbmcgZm9yIGEgcGhvbmUgdGhhdCBoYXMgYSBzbGltIGJvZHk/Iik7CiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBib3R1aS5hY3Rpb24uYnV0dG9uKHsKICAgICAgICAgICAgICAgIGFkZE1lc3NhZ2U6IHRydWUsCiAgICAgICAgICAgICAgICBodW1hbjogZmFsc2UsCiAgICAgICAgICAgICAgICBhY3Rpb246IFt7CiAgICAgICAgICAgICAgICAgIHRleHQ6ICJZZXMiLAogICAgICAgICAgICAgICAgICB2YWx1ZTogIlllcyIKICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgdGV4dDogIk5vIiwKICAgICAgICAgICAgICAgICAgdmFsdWU6ICJObyIKICAgICAgICAgICAgICAgIH1dCiAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICBfdGhpczkudXNlcl9wcmVmZXIuc2xpbSA9IHJlcy52YWx1ZTsKICAgICAgICAgICAgICAgIHZhciBtc2cgPSAiIjsKCiAgICAgICAgICAgICAgICBpZiAocmVzLnZhbHVlID09PSAiWWVzIikgewogICAgICAgICAgICAgICAgICBtc2cgPSAiT2theSwgc28geW91IGFyZSBsb29raW5nIGZvciBhIG1vYmlsZSBwaG9uZSB0aGF0IGhhcyBhIHNsaW0gYm9keS4gIjsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIG1zZyA9ICJPa2F5LCBzbyB5b3UgbWF5IG5vdCBjYXJlIGFib3V0IHRoZSB0aGlja25lc3Mgb2YgYSBwaG9uZS4gIjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM5LmJvdChtc2cpOwogICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgX3RoaXM5LmJvdCgiUGxlYXNlIGdpdmUgbWUgYSBtb21lbnQsIGFuZCBJ4oCZbGwgbG9vayBmb3IgdGhlIGJlc3QgbW9iaWxlIHBob25lcyBmb3IgeW91LiIpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgLy/otK3nianovabpg6jliIYKICAgIGNsaWNrQ2FydDogZnVuY3Rpb24gY2xpY2tDYXJ0KCkgewogICAgICB0aGlzLnNob3dfY2FydCA9IHRydWU7CiAgICB9LAogICAgLy/ot7PliLDkuIvkuIDpobUKICAgIG5leHRQYWdlOiBmdW5jdGlvbiBuZXh0UGFnZSgpIHsKICAgICAgdmFyIF90aGlzMTAgPSB0aGlzOwoKICAgICAgaW5zdGFuY2UucG9zdCgnL2FwaS9wYWdlMicsIHsKICAgICAgICAncGFnZTJUJzogbmV3IERhdGUoKS5nZXRUaW1lKCksCiAgICAgICAgJ3Bob25lbGlzdCc6IHRoaXMucGhvbmVfaW5fY2FydCwKICAgICAgICAndXVpZCc6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1dWlkJykKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzKTsKCiAgICAgICAgX3RoaXMxMC4kcm91dGVyLnJlcGxhY2UoJy9xdWUxJykuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0gLy8gY3RybEF2YTogZnVuY3Rpb24gKCkgewogICAgLy8gICB0aGlzLmF2YV9jc3MgPSB0cnVlCiAgICAvLyAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgLy8gICAgIHRoaXMuYXZhX2NzcyA9IGZhbHNlCiAgICAvLyAgIH0sIDEwMDApOwogICAgLy8gfQoKICB9LAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7CiAgICBjbGVhckludGVydmFsKHRoaXMudGltZXIpOwogIH0sCiAgLy8gbW91bnRlZCgpIHsKICAvLyAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ1dWlkIiwgImUzNGNkZGM0YTdhZTQ3YmI5ZjdiYWRmOWU0NGNmNDFlIik7CiAgLy8gICAvLyB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogIC8vICAgLy8gICBzZXRUaW1lb3V0KHRoaXMuY3RybEF2YSwgMCkKICAvLyAgIC8vIH0sIDQwMDApCiAgLy8gfSwKICBjb21wdXRlZDogewogICAgLy8g6K6h566X5bGe5oCn55qEIGdldHRlcgogICAgY2FydF9pdGVtX2NvdW50OiBmdW5jdGlvbiBjYXJ0X2l0ZW1fY291bnQoKSB7CiAgICAgIHJldHVybiB0aGlzLnBob25lX2luX2NhcnQubGVuZ3RoOwogICAgfQogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0SA,wC,CACA;;AACA;AACA;AAEA;EACAA,uBADA;EAEAC;IACAC;EADA,CAFA;EAKAC;IACA;MACA;MACAC,cAFA;MAGAC,kBAHA;MAIAC,eAJA;MAKAC,gBALA;MAMAC,sBANA;MAOAC,qBAPA;MAQAC,oBARA;MASAC,gBATA;MAUAC,cAVA;MAWAC,cAXA;MAYAC,sBAZA;MAaAC,SAbA;MAcAC,gBACA;QACAC,mBADA;QAEAC;MAFA,CADA,EAKA;QACAD,iBADA;QAEAC;MAFA,CALA,CAdA;MAyBA;MACAC,cA1BA;MA2BAC,kBA3BA;MA4BAC,wBA5BA;MA8BA;MACAC,kCA/BA;MAgCAC,WAhCA;MAiCAC,qBAjCA;MAkCAC;QACAC,UADA;QAEAC,WAFA;QAGAC;MAHA,CAlCA;MAuCAC,iBAvCA;MAwCAC,iBAxCA;MAyCAC,iBAzCA;MA0CAC,eA1CA;MA2CAC,iBA3CA;MA4CAC;IA5CA;EA8CA,CApDA;EAqDAC;IACA;IACAC;MACA;MACAC;MACA;IACA,CANA;IAOA;IACAC;MACA;QACAC,YADA;QAEAnC,aAFA;QAGAoC,uCAHA;QAIAC,WAJA;QAKAC;MALA;IAOA,CAhBA;IAiBA;IAEA;IACAC;MAAA;;MACAC;QACAL,aADA;QAEAnC,aAFA;QAGAqC,WAHA;QAIAC;MAJA,GAKAG,IALA,CAKA;QACAD;UACAE,iBADA;UAEAC,YAFA;UAGAC;QAHA,GAIAH,IAJA,CAIA;UACA;UACA;YACA;UACA;;UACA;YACA;UACA;QACA,CAZA;MAaA,CAnBA;IAoBA,CAzCA;IA2CA;IACAI,gBA5CA,4BA4CAC,MA5CA,EA4CA;MAAA;;MACA;QACA;MACA,CAFA,MAEA;QACA;QACAA;QACAA;QACAC;UACA;UACA;YACA;YACA;YACA,sCAHA,CAIA;;YACA;cACA,gBADA;cAEA,sBAFA;cAGA;YAHA;;YAKA;cACA;;cACA;YACA,CAHA;UAIA,CAdA,MAcA;YACA;;YACA;UACA;QACA,CApBA,EAoBAC,KApBA,CAoBA;UACAf;UACA;;UACA;QACA,CAxBA;MAyBA;IACA,CA7EA;IA+EA;IACAgB;MAAA;;MACA;MACAT;;MACA;QACA;QACA;QACA;MACA,CAPA,CAQA;;;MACA;QACA;QACA;QACAA;UACAF;QADA,GAEAG,IAFA,CAEA;UACA;YACA,cADA;YAEA,sBAFA;YAGA,oBAHA;YAIA,yBAJA;YAKA,cALA;YAMA,yCANA;YAOA;UAPA;;UASAM;YACAG,0BADA;YAEA/B,uBAFA;YAGAgC,4BAHA;YAIAjC;UAJA,GAKAuB,IALA,CAKA;YACAR;YACA;YACA;;YACA;cACA;gBACA;kBACA;gBACA,CAFA;cAGA,CAJA;YAKA,CANA,MAMA;cACA;gBACA;cACA,CAFA;YAGA;;YACA;YACA;UACA,CAtBA,EAsBAe,KAtBA,CAsBA;YACA;;YACA;UACA,CAzBA;QA0BA,CAtCA;MAuCA,CA1CA,MA0CA;QACA;QACA;MACA;IAEA,CAxIA;IA0IA;IACAI,SA3IA,uBA2IA;MAAA;;MACA;MACA;QACA;MACA,CAFA;MAGA;QACA,cADA;QAEA,uBAFA;QAGA;MAHA;IAKA,CArJA;IAuJA;IACAC,eAxJA,6BAwJA;MAAA;;MACApB;MACA;;MACA;QACA;QACA;;QACA;UACA;QACA,CAFA,MAEA;UACA;YACA;cACA;cACA;cACA;YACA;;YACA;cACA;cACAO;gBACAL,YADA;gBAEAnC,aAFA;gBAGAqC,WAHA;gBAIAD,uCAJA;gBAKAE;cALA,GAMAG,IANA,CAMA;gBACAD;kBACAE,iBADA;kBAEAC,YAFA;kBAGAC;oBACA/B,WADA;oBAEAC;kBAFA,GAIA;oBACAD,UADA;oBAEAC;kBAFA,CAJA;gBAHA,GAWA2B,IAXA,CAWA;kBACA;kBACA;oBACA;oBACAM;sBACA,gCADA,CAEA;;sBACA;;sBACA;oBACA,CALA;kBAMA;;kBACA;oBACA;oBACA;oBACA;;oBACA;kBACA;gBACA,CA5BA;cA6BA,CApCA;YAqCA,CAvCA,MAuCA;cACAA;gBACA;gBACA;;gBACA;cACA,CAJA;YAKA,CANA,MAMA;cACA;cACA;cACA;cACA;cACAA;gBACA7B,eADA;gBAEAiC,0BAFA;gBAGAG;cAHA,GAIAb,IAJA,CAIA;gBACA;gBACA;;gBACA;kBACA;gBACA,CAFA;cAGA,CAVA;YAWA;UACA,CApEA,MAoEA;YACA;YACA;YACA;YACAM;cACA7B,eADA;cAEAiC,0BAFA;cAGAG;YAHA,GAIAb,IAJA,CAIA;cACA;cACA;;cACA;gBACA;cACA,CAFA;YAGA,CAVA;UAWA;QACA;MACA,CA3FA,MA2FA;QACA;MACA;IACA,CAzPA;IA2PA;IACAc,UA5PA,wBA4PA;MAAA;;MACAtB;;MACA;QACA;UACA;UACA;UACA;QACA;;QACA;UACA;UACAO;YACAL,YADA;YAEAnC,aAFA;YAGAqC,WAHA;YAIAD,uCAJA;YAKAE;UALA,GAMAG,IANA,CAMA;YACAD;cACAE,iBADA;cAEAC,YAFA;cAGAC;gBACA/B,WADA;gBAEAC;cAFA,GAIA;gBACAD,UADA;gBAEAC;cAFA,CAJA;YAHA,GAWA2B,IAXA,CAWA;cACA;cACA;gBACA;gBACAM;kBACA,gCADA,CAEA;;kBACA;;kBACA;gBACA,CALA;cAMA;;cACA;gBACA;gBACA;gBACA;;gBACA;cACA;YACA,CA5BA;UA6BA,CApCA;QAqCA,CAvCA,MAuCA;UACAA;YACA;YACA;;YACA;UACA,CAJA;QAKA,CANA,MAMA;UACA;UACA;UACA;UACA;UACAA;YACA7B,eADA;YAEAiC,0BAFA;YAGAG;UAHA,GAIAb,IAJA,CAIA;YACA;YACA;;YACA;cACA;YACA,CAFA;UAGA,CAVA;QAWA;MACA,CApEA,MAoEA;QACA;UACA;QACA;;QACA;UACA;QACA;;QACA;UACA;UACA;UACA;QACA,CAJA,MAIA;UACA;UACAD;YACAF;UADA,GAEAG,IAFA,CAEA;YACA;cACA,cADA;cAEA,gBAFA;cAGA;YAHA;;YAKAM;cACA7B,iBADA;cAEAiC,4BAFA;cAGAG;YAHA,GAIAb,IAJA,CAIA;cACA;cACA;;cACA;gBACA;cACA,CAFA;YAGA,CAVA;UAWA,CAnBA;QAoBA;MACA;IACA,CArWA;IAuWA;IACAe;MAAA;;MACA;MACA;MACAhB;QACAL,YADA;QAEAC,uCAFA;QAGApC;MAHA,GAIAyC,IAJA,CAIA;QACA;QACAM;UACA7B,iBADA;UAEAiC,4BAFA;UAGAG;QAHA,GAIAb,IAJA,CAIA;UACAgB;QACA,CANA,EAMAhB,IANA,CAMA;UAAA,OACA;YACAD;cACAxC,cADA;cAEAoC,uCAFA;cAGAE;YAHA,GAIAG,IAJA,CAIA;cACA;cACAD;gBACAE,iBADA;gBAEAC,YAFA;gBAGAC;kBACA/B,WADA;kBAEAC;gBAFA,GAIA;kBACAD,UADA;kBAEAC;gBAFA,CAJA;cAHA,GAWA2B,IAXA,CAWA;gBACA;gBACA;kBACA;kBACAM;oBACA,gCADA,CAEA;;oBACA;;oBACA;kBACA,CALA;gBAMA;;gBACA;kBACA;kBACA;kBACA;;kBACA;gBACA;cACA,CA5BA;YA6BA,CAnCA;UAFA;QAAA,CANA;MA6CA,CAnDA;IAoDA,CA/ZA;IAiaA;IACAW;MAAA;;MACAlB;QACAL,aADA;QAEAnC,aAFA;QAGAqC,WAHA;QAIAC;MAJA,GAKAG,IALA,CAKA;QACAD;UACAE,iBADA;UAEAC,YAFA;UAGAC;YACA/B,mBADA;YAEAC;UAFA,GAIA;YACAD,iBADA;YAEAC;UAFA,CAJA;QAHA,GAWA2B,IAXA,CAWA;UACA;UACA;YACA;UACA;;UACA;YACA;UACA;QACA,CAnBA;MAoBA,CA1BA;IA2BA,CA9bA;IAgcA;IACAkB;MACA;MACA;IACA,CApcA;IAscA;IACAC;MAAA;;MACA;QACA;QACA;UACA;QACA,CAFA,EAEAnB,IAFA,CAEA;UACA;QACA,CAJA,EAIAA,IAJA,CAIA;UACA;QACA,CANA,EAMAA,IANA,CAMA;UACA;YACAC,gBADA;YAEAC,YAFA;YAGAC;cAAA/B;cAAAC;YAAA;cAAAD;cAAAC;YAAA;cACAD,eADA;cAEAC;YAFA,GAGA;cAAAD;cAAAC;YAAA,CAHA;UAHA,GAOA2B,IAPA,CAOA;YACA;;YACA;;YACA;cACAoB;YACA,CAFA,MAEA;cACAA;YACA,CAFA,MAEA;cACAA;YACA,CATA,CAUA;;;YACA;cACA;YACA,CAFA,EAEApB,IAFA,CAEA;cACA;YACA,CAJA,EAIAA,IAJA,CAIA;cACA;gBACAC,gBADA;gBAEAC,YAFA;gBAGAC;kBAAA/B;kBAAAC;gBAAA;kBAAAD;kBAAAC;gBAAA;kBACAD,YADA;kBAEAC;gBAFA,GAGA;kBAAAD;kBAAAC;gBAAA,CAHA;cAHA,GAOA2B,IAPA,CAOA;gBACA;gBACA;gBACA;;gBACA;kBACAqB;gBACA,CAFA,MAEA;kBACAA;gBACA;;gBACA;kBACAC;gBACA,CAFA,MAEA;kBACAA;gBACA,CAFA,MAEA;kBACAA;gBACA;;gBACA;gBACA;cACA,CAzBA;YA0BA,CA/BA,EA+BAtB,IA/BA,CA+BA;cACA;YACA,CAjCA,EAiCAA,IAjCA,CAiCA;cACA;gBACAC,gBADA;gBAEAC,YAFA;gBAGAC;kBAAA/B;kBAAAC;gBAAA;kBAAAD;kBAAAC;gBAAA;cAHA,GAIA2B,IAJA,CAIA;gBACA;gBACA;;gBACA;kBACAoB;gBACA,CAFA,MAEA;kBACAA;gBACA;;gBACA;cACA,CAbA,EAaApB,IAbA,CAaA;gBACA;cACA,CAfA;YAgBA,CAlDA;UAmDA,CArEA;QAsEA,CA7EA;MA8EA;IACA,CAzhBA;IA2hBA;IACAuB;MACA;IACA,CA9hBA;IA+hBA;IACAC;MAAA;;MACAlB;QACA,8BADA;QAEA,+BAFA;QAGA;MAHA,GAIAN,IAJA,CAIA;QACAR;;QACA;UACAA;QACA,CAFA;MAGA,CATA;IAUA,CA3iBA,CA4iBA;IACA;IACA;IACA;IACA;IACA;;EAjjBA,CArDA;EAwmBAiC,aAxmBA,2BAwmBA;IACAC;EACA,CA1mBA;EA2mBA;EACA;EACA;EACA;EACA;EACA;EACAC;IACA;IACAC;MACA;IACA;EAJA;AAjnBA","names":["name","components","BotUi","data","loading","msg_btn_ctrl","show_help","show_rate","show_preference","show_next_page","help_showed_count","show_cart","ava_css","ava_counter","show_phone_page","timer","phone_buttons","text","value","in_crit","crit_text_point","crit_phone_point","uuid","message","clicked_trans_url","user_prefer","brands","budget","slim","phone_in_cart","current_phone","latest_dialog","last_action","critical_data","try_another_count","methods","clicked_url","console","bot","type","photo","delay","content","botPhoneCard","botui","then","addMessage","human","action","submitPreference","values","instance","catch","sendMessage","msgT","logger","addToCart","submitPhoneRate","lTime","tryAnother","letBotSuggest","that","PhoneCard_2btn","clickHelp","closeHelp","msg","price","brand","clickCart","nextPage","beforeDestroy","clearInterval","computed","cart_item_count"],"sourceRoot":"src/views","sources":["ChatHumanHigh.vue"],"sourcesContent":["<template>\n  <div class=\"chatbot\">\n    <!--    <div class=\"avatar_back\">-->\n    <!--      <div class=\"avatar\" v-bind:class=\"{avatar_ani:ava_css}\"></div>-->\n    <!--    </div>-->\n    <van-nav-bar title='Phoneshop' @click-left=\"clickHelp\" @click-right=\"clickCart\" left-text=\"\"\n                 right-text=\"Cart\" class=\"chatbot-header\">\n      <template #left>\n        <van-icon name=\"info-o\" size=\"16\"><span\n            style=\"color: #1989fa;font-size: 16px;font-family:-apple-system,BlinkMacSystemFont,'Helvetica Neue',Helvetica,Segoe UI,Arial,Roboto,'PingFang SC',miui,'Hiragino Sans GB','Microsoft Yahei',sans-serif \">Tips</span>\n        </van-icon>\n      </template>\n      <template #right>\n        <van-icon name=\"cart-o\" size=\"16\" :badge=\"cart_item_count\"><span\n            style=\"color: #1989fa;font-size: 16px;font-family:-apple-system,BlinkMacSystemFont,'Helvetica Neue',Helvetica,Segoe UI,Arial,Roboto,'PingFang SC',miui,'Hiragino Sans GB','Microsoft Yahei',sans-serif \">Cart</span>\n        </van-icon>\n      </template>\n    </van-nav-bar>\n    <div class=\"chatbot-send\">\n      <van-field\n          v-model=\"message\"\n          rows=\"1\"\n          autosize\n      >\n        <template #button>\n          <van-button size=\"small\" :disabled=\"msg_btn_ctrl\" type=\"info\" @click=\"sendMessage\"> Send</van-button>\n        </template>\n      </van-field>\n    </div>\n    <div class=\"chatbot-content\">\n      <BotUi v-on:clicked_url=\"clicked_url\"></BotUi>\n    </div>\n\n    <!-- 初始化的偏好-->\n    <van-popup\n        v-model=\"show_preference\"\n        :style=\"{width:'90%'}\"\n        :close-on-click-overlay=\"false\"\n        round\n    >\n      <van-nav-bar title='My Preference'/>\n      <div class=\"phone_preference\">\n        <van-form @submit=\"submitPreference\">\n          <p style=\"padding:0 10px 0 16px; margin-bottom: 5px;\">Please select no more than three brands you like.</p>\n          <van-field name=\"brands\" :rules=\"[{ required: true, message: 'Please select' }]\">\n            <template #input>\n              <van-checkbox-group v-model=\"user_prefer.brands\" :max=\"3\" direction=\"horizontal\">\n                <van-checkbox name=\"Xiaomi\" shape=\"square\">Xiaomi</van-checkbox>\n                <van-checkbox name=\"vivo\" shape=\"square\">vivo</van-checkbox>\n                <van-checkbox name=\"Oppo\" shape=\"square\">Oppo</van-checkbox>\n                <van-checkbox name=\"Samsung\" shape=\"square\">Samsung</van-checkbox>\n                <van-checkbox name=\"Realme\" shape=\"square\">Realme</van-checkbox>\n                <van-checkbox name=\"Motorola\" shape=\"square\">Motorola</van-checkbox>\n                <van-checkbox name=\"Honor\" shape=\"square\">Honor</van-checkbox>\n                <van-checkbox name=\"Huawei\" shape=\"square\">Huawei</van-checkbox>\n                <van-checkbox name=\"ZTE\" shape=\"square\">ZTE</van-checkbox>\n                <van-checkbox name=\"BLU\" shape=\"square\">BLU</van-checkbox>\n                <van-checkbox name=\"Nokia\" shape=\"square\">Nokia</van-checkbox>\n                <van-checkbox name=\"LG\" shape=\"square\">LG</van-checkbox>\n                <van-checkbox name=\"Ulefone\" shape=\"square\">Ulefone</van-checkbox>\n                <van-checkbox name=\"TCL\" shape=\"square\">TCL</van-checkbox>\n                <van-checkbox name=\"OnePlus\" shape=\"square\">OnePlus</van-checkbox>\n                <van-checkbox name=\"alcatel\" shape=\"square\">alcatel</van-checkbox>\n                <van-checkbox name=\"Asus\" shape=\"square\">Asus</van-checkbox>\n                <van-checkbox name=\"Lenovo\" shape=\"square\">Lenovo</van-checkbox>\n                <van-checkbox name=\"Sony\" shape=\"square\">Sony</van-checkbox>\n                <van-checkbox name=\"HTC\" shape=\"square\">HTC</van-checkbox>\n                <van-checkbox name=\"Meizu\" shape=\"square\">Meizu</van-checkbox>\n                <van-checkbox name=\"Wiko\" shape=\"square\">Wiko</van-checkbox>\n                <van-checkbox name=\"Tecno\" shape=\"square\">Tecno</van-checkbox>\n                <van-checkbox name=\"Lava\" shape=\"square\">Lava</van-checkbox>\n                <van-checkbox name=\"Infinix\" shape=\"square\">Infinix</van-checkbox>\n                <van-checkbox name=\"Google\" shape=\"square\">Google</van-checkbox>\n                <van-checkbox name=\"Apple\" shape=\"square\">Apple</van-checkbox>\n              </van-checkbox-group>\n            </template>\n          </van-field>\n\n          <p style=\"padding:0 10px 0 16px; margin-bottom: 5px;\">Your Maximum Budget: <span\n              style=\"color: #B24040\">${{ user_prefer.budget }}</span></p>\n          <van-field name=\"budget\" :rules=\"[{ required: true, message: 'please select' }]\">\n            <template #input>\n              <van-slider :min=\"100\" :max=\"1400\" :step=\"100\" v-model=\"user_prefer.budget\"/>\n            </template>\n          </van-field>\n          <p style=\"padding:0 10px 0 16px; margin-bottom: 5px;\">Main Camera Minimum Resolution: <span\n              style=\"color: #B24040\">{{ user_prefer.cameras }}MP</span></p>\n          <van-field name=\"cameras\" :rules=\"[{ required: true, message: 'please select' }]\">\n            <template #input>\n              <van-slider :min=\"0\" :max=\"108\" :step=\"6\" v-model=\"user_prefer.cameras\"/>\n            </template>\n          </van-field>\n          <div style=\"margin: 16px;\">\n            <van-button round block type=\"info\" native-type=\"submit\">Summit</van-button>\n          </div>\n        </van-form>\n      </div>\n    </van-popup>\n    <!--  左侧 help-->\n    <van-popup\n        v-model=\"show_help\"\n        :style=\"{ height: '520px',width:'90%',overflow:'hidden'}\"\n        @close=\"closeHelp\"\n        :close-on-click-overlay=\"true\"\n        round\n    >\n      <div class=\"help\">\n        <van-nav-bar\n            right-text=\"Close\"\n            :fixed=\"true\"\n            @click-right=\"show_help=!show_help\"\n        />\n        <!--        <div style=\"position: fixed;top: 0\">-->\n        <!--          <van-button type=\"info\" block @click=\"show_help=!show_help\" round > Close</van-button>-->\n        <!--        </div>-->\n        <div\n            style=\"width:100%; box-sizing: border-box; margin-top: 36px; position: absolute; top:0; left: 0;padding: 0 10px 10px 10px; overflow-y: scroll;-webkit-overflow-scrolling: touch;height: 480px\">\n          <h3>Tips for chatting for phone searching</h3>\n\n          <h4>By price:</h4>\n          <ul>\n            <li>\"I want to buy a cheaper price phone.\"</li>\n            <li>\"The price can be higher.\"</li>\n          </ul>\n\n          <h4>By brand:</h4>\n          <ul>\n            <li>\"I like the iPhone.\"</li>\n            <li>\"I want to buy a Huawei mobile phone.\"</li>\n          </ul>\n\n          <h4>By size:</h4>\n          <ul>\n            <li>\"I like a light weight phone.\"</li>\n            <li>\"I want to buy a phone with a slim body.\"</li>\n          </ul>\n\n          <h4>By display:</h4>\n          <ul>\n            <li>\"I need a phone having better display.\"</li>\n            <li>\"I want a phone having higher resolution.\"</li>\n          </ul>\n\n          <h4> By storage:</h4>\n          <ul>\n            <li>\"I need a phone with a large storage.\"</li>\n            <li>\"I need a phone having more space for saving my photos.\"</li>\n          </ul>\n          <h4>By computing performance:</h4>\n          <ul>\n            <li>\"I want to buy a phone having larger RAM.\"</li>\n            <li>\"I want to buy a phone having better CPU.\"</li>\n            <li>\"I want to buy a phone running applications faster.\"</li>\n          </ul>\n\n          <h4>By operating system:</h4>\n          <ul>\n            <li>\"I want to buy an Android phone.\"</li>\n            <li>\"I like the ios system.\"</li>\n          </ul>\n          <br>\n        </div>\n      </div>\n\n    </van-popup>\n\n    <!--右侧购物车-->\n    <van-popup\n        v-model=\"show_cart\"\n        closeable\n        close-icon=\"close\"\n        position=\"right\"\n        round\n        :style=\"{ height: '100%',width:'80%' }\"\n    >\n      <div class=\"cart\" style=\"margin-top:3em\">\n        <van-card v-for=\"item in phone_in_cart\" :key=\"item.id\"\n                  :thumb=\"item.img\">\n          <template #title>\n            <div style=\"font-size: 16px;font-weight: bolder;\">{{ item.modelname }}</div>\n          </template>\n          <template #price>\n            <div style=\"font-weight:bold;font-size:16px;color: #B24040\">${{ item.price }}</div>\n          </template>\n          <template #num>\n            <div>Rating:{{ item.rate }}</div>\n          </template>\n          <template #tags>\n            <div>\n              <van-tag plain type=\"primary\" style=\"margin:2px\">Storage:{{ item.storage }}</van-tag>\n              <van-tag plain type=\"primary\" style=\"margin:2px\">RAM:{{ item.ram }}</van-tag>\n              <van-tag plain type=\"primary\" style=\"margin:2px\">{{ item.os1 }}</van-tag>\n              <van-tag plain type=\"primary\" style=\"margin: 2px\">{{ item.cam1 }}MP</van-tag>\n              <van-tag plain type=\"primary\" style=\"margin: 2px\">{{ item.displaysize }}inches</van-tag>\n              <van-tag plain type=\"primary\" style=\"margin: 2px\">{{ item.resolution1 }}*{{ item.resolution2 }}</van-tag>\n              <van-tag plain type=\"primary\" style=\"margin: 2px\">{{ item.battery }}mAh</van-tag>\n            </div>\n          </template>\n        </van-card>\n      </div>\n    </van-popup>\n\n    <van-popup\n        v-model=\"show_phone_page\"\n        closeable\n        close-icon=\"close\"\n        position=\"left\"\n        round\n        :style=\"{ height: '100%',width:'100%' }\"\n    >\n      <div class=\"cart\" style=\"margin-top:3em;height: 100%\">\n        <iframe style=\"width: 100%;height: 100%\" :src=\"clicked_trans_url\"/>\n      </div>\n    </van-popup>\n\n    <!--    评分框-->\n    <van-popup\n        v-model=\"show_rate\"\n        :style=\"{width:'300px' }\"\n        :close-on-click-overlay=\"false\"\n        round\n    >\n      <div class=\"rate\">\n        <van-nav-bar title='Please rate this phone'/>\n        <van-card\n            :thumb=\"current_phone.img\">\n          <template #title>\n            <div style=\"font-size: 16px;font-weight: bolder;\">{{ current_phone.modelname }}</div>\n          </template>\n          <template #price>\n            <div style=\"font-weight:bold;font-size:16px;color: #B24040\">${{ current_phone.price }}</div>\n          </template>\n          <template #tags>\n            <div>\n              <van-tag plain type=\"primary\" style=\"margin:2px\">Storage:{{ current_phone.storage }}</van-tag>\n              <van-tag plain type=\"primary\" style=\"margin:2px\">RAM:{{ current_phone.ram }}</van-tag>\n              <van-tag plain type=\"primary\" style=\"margin:2px\">{{ current_phone.os1 }}</van-tag>\n              <van-tag plain type=\"primary\" style=\"margin: 2px\">{{ current_phone.cam1 }}MP</van-tag>\n              <van-tag plain type=\"primary\" style=\"margin: 2px\">{{ current_phone.displaysize }}inches</van-tag>\n              <van-tag plain type=\"primary\" style=\"margin: 2px\">\n                {{ current_phone.resolution1 }}*{{ current_phone.resolution2 }}\n              </van-tag>\n              <van-tag plain type=\"primary\" style=\"margin: 2px\">{{ current_phone.battery }}mAh</van-tag>\n            </div>\n          </template>\n        </van-card>\n        <div style=\"display: flex;justify-content: center;margin: 24px 0;\">\n          <van-rate v-model=\"current_phone.rate\"/>\n        </div>\n        <van-button type=\"info\" block @click=\"submitPhoneRate\">Submit</van-button>\n      </div>\n    </van-popup>\n\n    <!-- 去下一页   -->\n    <van-popup\n        v-model=\"show_next_page\"\n        :style=\"{width:'300px' }\"\n        :close-on-click-overlay=\"false\"\n        round\n    >\n      <div class=\"rate\">\n        <van-nav-bar title='Next Step'/>\n        <div class=\"cart\">\n          <van-card v-for=\"item in phone_in_cart\" :key=\"item.id\"\n                    :thumb=\"item.img\">\n            <template #title>\n              <div style=\"font-size: 16px;font-weight: bolder;\">{{ item.modelname }}</div>\n            </template>\n            <template #price>\n              <div style=\"font-weight:bold;font-size:16px;color: #B24040\">${{ item.price }}</div>\n            </template>\n            <template #num>\n              <div>Rating:{{ item.rate }}</div>\n            </template>\n            <template #tags>\n              <div>\n                <van-tag plain type=\"primary\" style=\"margin:2px\">Storage:{{ item.storage }}</van-tag>\n                <van-tag plain type=\"primary\" style=\"margin:2px\">RAM:{{ item.ram }}</van-tag>\n                <van-tag plain type=\"primary\" style=\"margin:2px\">{{ item.os1 }}</van-tag>\n                <van-tag plain type=\"primary\" style=\"margin: 2px\">{{ item.cam1 }}MP</van-tag>\n                <van-tag plain type=\"primary\" style=\"margin: 2px\">{{ item.displaysize }}inches</van-tag>\n                <van-tag plain type=\"primary\" style=\"margin: 2px\">{{ item.resolution1 }}*{{\n                    item.resolution2\n                  }}\n                </van-tag>\n                <van-tag plain type=\"primary\" style=\"margin: 2px\">{{ item.battery }}mAh</van-tag>\n              </div>\n            </template>\n          </van-card>\n        </div>\n        <p style=\"padding:0 16px;\">These are your favorite phones. Let's move to the next step.</p>\n        <van-button type=\"primary\" block @click=\"nextPage\">Next</van-button>\n      </div>\n    </van-popup>\n  </div>\n</template>\n\n<script>\nimport BotUi from \"../components/BotUi\";\n// 对象引入\nimport {botui} from '@/components/BotUi';\nimport {instance} from \"@/request\";\n\nexport default {\n  name: \"Chat_human_high\",\n  components: {\n    BotUi,\n  },\n  data: function () {\n    return {\n      //控制功能\n      loading: false,\n      msg_btn_ctrl: true,\n      show_help: true,\n      show_rate: false,\n      show_preference: false,\n      show_next_page: false,\n      help_showed_count: 1,\n      show_cart: false,\n      ava_css: false,\n      ava_counter: 0,\n      show_phone_page: false,\n      timer: \"\",\n      phone_buttons: [\n        {\n          text: 'Add to cart',\n          value: 'Add to cart'\n        },\n        {\n          text: 'Next item',\n          value: 'Next item'\n        },\n      ],\n\n      //critical的标识\n      in_crit: false,\n      crit_text_point: 0,\n      crit_phone_point: [0, 0],\n\n      //数据部分\n      uuid: localStorage.getItem(\"uuid\"),\n      message: \"\",\n      clicked_trans_url: \"\",\n      user_prefer: {\n        brands: [],\n        budget: 700,\n        slim: \"\",\n      },\n      phone_in_cart: [],\n      current_phone: {},\n      latest_dialog: [],\n      last_action: \"\",\n      critical_data: [],\n      try_another_count: 0,\n    }\n  },\n  methods: {\n    //从卡片组件里面获得点击事件的url\n    clicked_url: function (childValue) {\n      this.clicked_trans_url = \"https://www.chatbot.fans:3000/?url=\" + childValue\n      console.log(this.clicked_trans_url)\n      this.show_phone_page = true;\n    },\n    //默认对话\n    bot: function (msg) {\n      return botui.message.bot({\n        type: 'html',\n        loading: true,\n        photo: require(\"../assets/imgs/bg.png\"),\n        delay: 1600,\n        content: msg\n      })\n    },\n    //提交手机偏好\n\n    //商品卡片\n    botPhoneCard: function (phone) {\n      botui.message.bot({\n        type: 'phone',\n        loading: true,\n        delay: 1600,\n        content: phone,\n      }).then(() => {\n        botui.action.button({\n          addMessage: false,\n          human: false,\n          action: this.phone_buttons\n        }).then((res) => {\n          //判断点了什么按钮\n          if (res.text === 'Add to cart') {\n            this.addToCart(this.current_phone);\n          }\n          if (res.text === 'Next item') {\n            this.tryAnother();\n          }\n        })\n      })\n    },\n\n    //初始化用户偏好\n    submitPreference(values) {\n      if (values.brands.length < 1) {\n        this.$toast(\"Please select at last one brand.\");\n      } else {\n        this.loading = true;\n        values['uuid'] = localStorage.getItem('uuid');\n        values['preferT'] = new Date().getTime();\n        instance.post('/api/prefer', values).then((res) => {\n          //console.log(res)\n          if (res.data.status === 1) {\n            this.loading = false;\n            this.show_preference = false;\n            this.current_phone = res.data.phone;\n            //添加操作记录\n            this.latest_dialog.push({\n              \"agent\": \"robot\",\n              \"action\": \"Initialize\",\n              \"timestamp\": new Date().getTime()\n            })\n            this.bot(res.data.msg).then(() => {\n              this.botPhoneCard(this.current_phone);\n              this.msg_btn_ctrl = false;\n            })\n          } else {\n            this.loading = false;\n            this.$toast(\"Please read and accept the informed consent first.\")\n          }\n        }).catch((err) => {\n          console.log(err.message);\n          this.loading = false;\n          this.$toast(\"Network error, please try again.\");\n        })\n      }\n    },\n\n    //发送用户消息\n    sendMessage: function () {\n      this.last_action = 'sendMessage';\n      botui.action.hide();\n      if (this.in_crit) {\n        this.in_crit = false;\n        this.crit_text_point = 0;\n        this.crit_phone_point = [0, 0];\n      }\n      //先禁用按钮\n      if (this.message.length >= 2) {\n        //可以发送\n        this.msg_btn_ctrl = true;\n        botui.message.human({\n          content: this.message,\n        }).then(() => {\n          this.latest_dialog.push({\n            \"agent\": \"you\",\n            \"text\": this.message,\n            \"modality\": \"typing\",\n            \"action\": \"User_Critique\",\n            \"critique\": [],\n            \"critiqued_item\": this.current_phone.id,\n            \"timestamp\": new Date().getTime()\n          })\n          instance.post('/api/userMessage', {\n            msgT: new Date().getTime(),\n            message: this.message,\n            logger: this.latest_dialog,\n            uuid: localStorage.getItem('uuid'),\n          }).then((res) => {\n            console.log(res);\n            this.current_phone = res.data.phone;\n            this.latest_dialog = [];\n            if (res.data['msg'].length === 2) {\n              this.bot(res.data.msg[0]).then(() => {\n                this.bot(res.data.msg[1]).then(() => {\n                  this.botPhoneCard(this.current_phone);\n                })\n              });\n            } else {\n              this.bot(res.data.msg[0]).then(() => {\n                this.botPhoneCard(this.current_phone);\n              })\n            }\n            this.msg_btn_ctrl = false;\n            this.message = null;\n          }).catch(() => {\n            this.msg_btn_ctrl = false;\n            this.$toast('Please try again.');\n          })\n        })\n      } else {\n        this.msg_btn_ctrl = false;\n        this.$toast('Please enter more information.');\n      }\n\n    },\n\n    //加入购物车\n    addToCart() {\n      this.last_action = \"addToCart\";\n      this.bot(\"Please rate your liked phone.\").then(() => {\n        this.show_rate = true\n      })\n      this.latest_dialog.push({\n        \"agent\": \"you\",\n        \"action\": \"Accept_Item\",\n        \"timestamp\": new Date().getTime()\n      })\n    },\n\n    //手机评分\n    submitPhoneRate() {\n      console.log(this.crit_phone_point);\n      this.last_action = 'submitPhoneRate';\n      if (this.current_phone.rate) {\n        this.phone_in_cart.push(this.current_phone);\n        this.show_rate = false;\n        if (this.phone_in_cart.length === 3) {\n          this.show_next_page = true;\n        } else {\n          if (this.in_crit) {\n            if (this.crit_text_point < 3 && this.crit_phone_point[1] === 3) {\n              this.crit_phone_point[1] = 0\n              this.crit_phone_point[0] += 1\n              this.crit_text_point += 1\n            }\n            if (this.crit_text_point < 3 && this.crit_phone_point[1] === 0) {\n              //需要bot 说话\n              botui.message.bot({\n                type: 'html',\n                loading: true,\n                delay: 1600,\n                photo: require(\"../assets/imgs/bg.png\"),\n                content: this.critical_data['crit'][this.crit_text_point]\n              }).then(() => {\n                botui.action.button({\n                  addMessage: false,\n                  human: false,\n                  action: [{\n                    text: 'Yes',\n                    value: 'Yes'\n                  },\n                    {\n                      text: 'No',\n                      value: 'No'\n                    }]\n                }).then((res) => {\n                  //判断点了什么按钮\n                  if (res.text === 'Yes') {\n                    //查询手机是什么\n                    instance.get(\"/api/phone?id=\" + this.critical_data['phones'][this.crit_phone_point[0]][this.crit_phone_point[1]]).then((res) => {\n                      this.current_phone = res.data\n                      //展示手机卡片\n                      this.PhoneCard_2btn(this.current_phone)\n                      this.crit_phone_point[1] += 1\n                    })\n                  }\n                  if (res.text === 'No') {\n                    this.crit_phone_point[0] += 1\n                    this.crit_phone_point[1] = 0\n                    this.crit_text_point += 1\n                    this.tryAnother()\n                  }\n                })\n              })\n            } else if (this.crit_phone_point[1] < 3 && this.crit_text_point < 3) {\n              instance.get(\"/api/phone?id=\" + this.critical_data['phones'][this.crit_phone_point[0]][this.crit_phone_point[1]]).then((res) => {\n                this.current_phone = res.data;\n                this.crit_phone_point[1] += 1;\n                this.PhoneCard_2btn(this.current_phone);\n              })\n            } else {\n              //全都展示完了，给一个新的推荐\n              this.in_crit = false;\n              this.crit_text_point = 0;\n              this.crit_phone_point = [0, 0];\n              instance.post(\"/api/updatemodel\", {\n                uuid: this.uuid,\n                logger: this.latest_dialog,\n                lTime: new Date().getTime(),\n              }).then((res) => {\n                this.latest_dialog = [];\n                this.current_phone = res.data.phone;\n                this.bot(res.data.msg).then(() => {\n                  this.botPhoneCard(this.current_phone);\n                });\n              })\n            }\n          } else {\n            this.in_crit = false;\n            this.crit_text_point = 0;\n            this.crit_phone_point = [0, 0];\n            instance.post(\"/api/updatemodel\", {\n              uuid: this.uuid,\n              logger: this.latest_dialog,\n              lTime: new Date().getTime(),\n            }).then((res) => {\n              this.latest_dialog = [];\n              this.current_phone = res.data.phone;\n              this.bot(res.data.msg).then(() => {\n                this.botPhoneCard(this.current_phone);\n              });\n            })\n          }\n        }\n      } else {\n        this.$toast(\"Please rate this phone first.\")\n      }\n    },\n\n    //再来一个推荐\n    tryAnother() {\n      console.log(this.crit_phone_point);\n      if (this.in_crit) {\n        if (this.crit_text_point < 3 && this.crit_phone_point[1] === 3) {\n          this.crit_phone_point[1] = 0\n          this.crit_phone_point[0] += 1\n          this.crit_text_point += 1\n        }\n        if (this.crit_text_point < 3 && this.crit_phone_point[1] === 0) {\n          //需要bot 说话\n          botui.message.bot({\n            type: 'html',\n            loading: true,\n            delay: 1600,\n            photo: require(\"../assets/imgs/bg.png\"),\n            content: this.critical_data['crit'][this.crit_text_point]\n          }).then(() => {\n            botui.action.button({\n              addMessage: false,\n              human: false,\n              action: [{\n                text: 'Yes',\n                value: 'Yes'\n              },\n                {\n                  text: 'No',\n                  value: 'No'\n                }]\n            }).then((res) => {\n              //判断点了什么按钮\n              if (res.text === 'Yes') {\n                //查询手机是什么\n                instance.get(\"/api/phone?id=\" + this.critical_data['phones'][this.crit_phone_point[0]][this.crit_phone_point[1]]).then((res) => {\n                  this.current_phone = res.data\n                  //展示手机卡片\n                  this.PhoneCard_2btn(this.current_phone)\n                  this.crit_phone_point[1] += 1\n                })\n              }\n              if (res.text === 'No') {\n                this.crit_phone_point[0] += 1\n                this.crit_phone_point[1] = 0\n                this.crit_text_point += 1\n                this.tryAnother()\n              }\n            })\n          })\n        } else if (this.crit_phone_point[1] < 3 && this.crit_text_point < 3) {\n          instance.get(\"/api/phone?id=\" + this.critical_data['phones'][this.crit_phone_point[0]][this.crit_phone_point[1]]).then((res) => {\n            this.current_phone = res.data;\n            this.crit_phone_point[1] += 1;\n            this.PhoneCard_2btn(this.current_phone);\n          })\n        } else {\n          //全都展示完了，给一个新的推荐\n          this.in_crit = false;\n          this.crit_text_point = 0;\n          this.crit_phone_point = [0, 0];\n          instance.post(\"/api/updatemodel\", {\n            uuid: this.uuid,\n            logger: this.latest_dialog,\n            lTime: new Date().getTime(),\n          }).then((res) => {\n            this.latest_dialog = [];\n            this.current_phone = res.data.phone;\n            this.bot(res.data.msg).then(() => {\n              this.botPhoneCard(this.current_phone);\n            });\n          })\n        }\n      } else {\n        if (this.try_another_count === 0) {\n          this.try_another_count += 1;\n        }\n        if (this.last_action === 'tryAnother') {\n          this.try_another_count += 1\n        }\n        if (this.try_another_count === 3) {\n          this.last_action = \"letBotSuggect\";\n          this.try_another_count = 0;\n          this.letBotSuggest();\n        } else {\n          this.last_action = \"tryAnother\";\n          botui.message.human({\n            content: \"Show another phone\",\n          }).then(() => {\n            this.latest_dialog.push({\n              \"agent\": \"you\",\n              \"action\": \"Next\",\n              \"timestamp\": new Date().getTime()\n            })\n            instance.post(\"/api/updatemodel\", {\n              uuid: this.uuid,\n              logger: this.latest_dialog,\n              lTime: new Date().getTime(),\n            }).then((res) => {\n              this.latest_dialog = [];\n              this.current_phone = res.data.phone;\n              this.bot(res.data.msg).then(() => {\n                this.botPhoneCard(this.current_phone);\n              });\n            })\n          })\n        }\n      }\n    },\n\n// let bot suggest\n    letBotSuggest: function () {\n      let that = this;\n      this.in_crit = true;\n      botui.message.bot({\n        type: 'html',\n        photo: require(\"../assets/imgs/bg.png\"),\n        loading: true,\n      }).then((index) => {\n        //直接发送请求获取推荐的列表\n        instance.post(\"/api/syscri\", {\n          uuid: this.uuid,\n          logger: this.latest_dialog,\n          lTime: new Date().getTime(),\n        }).then((res) => {\n          that.critical_data = res.data['phones']\n        }).then(() => (\n            //得到推荐列表后，开始展示\n            botui.message.update(index, {\n              loading: false,\n              photo: require(\"../assets/imgs/bg.png\"),\n              content: that.critical_data['crit'][this.crit_text_point]\n            }).then(() => {\n              //先问yes no\n              botui.action.button({\n                addMessage: false,\n                human: false,\n                action: [{\n                  text: 'Yes',\n                  value: 'Yes'\n                },\n                  {\n                    text: 'No',\n                    value: 'No'\n                  }]\n              }).then((res) => {\n                //判断点了什么按钮\n                if (res.text === 'Yes') {\n                  //查询手机是什么\n                  instance.get(\"/api/phone?id=\" + this.critical_data['phones'][this.crit_phone_point[0]][this.crit_phone_point[1]]).then((res) => {\n                    this.current_phone = res.data\n                    //展示手机卡片\n                    this.PhoneCard_2btn(this.current_phone)\n                    this.crit_phone_point[1] += 1\n                  })\n                }\n                if (res.text === 'No') {\n                  this.crit_phone_point[0] += 1\n                  this.crit_phone_point[1] = 0\n                  this.crit_text_point += 1\n                  this.tryAnother()\n                }\n              })\n            })\n        ))\n      })\n    },\n\n//给系统推荐用\n    PhoneCard_2btn: function (phone) {\n      botui.message.bot({\n        type: 'phone',\n        loading: true,\n        delay: 1600,\n        content: phone,\n      }).then(() => {\n        botui.action.button({\n          addMessage: false,\n          human: false,\n          action: [{\n            text: 'Add to cart',\n            value: 'Add to cart'\n          },\n            {\n              text: 'Next item',\n              value: 'Next item'\n            }]\n        }).then((res) => {\n          //判断点了什么按钮\n          if (res.text === 'Add to cart') {\n            this.addToCart(this.current_phone);\n          }\n          if (res.text === 'Next item') {\n            this.tryAnother();\n          }\n        })\n      })\n    },\n\n//左上角tips部分\n    clickHelp: function () {\n      this.show_help = true;\n      this.help_showed_count += 1;\n    },\n\n//初始化引导语的入口\n    closeHelp: function () {\n      if (this.help_showed_count === 1) {\n        // 初始状态\n        this.bot(\"Hi! I’m Alex, a sales associate working at Phoneshop.\").then(() => {\n          return this.bot(\"I’m happy to help you with your purchase. We have all different types of mobile phones.\");\n        }).then(() => {\n          return this.bot(\"In order to ensure that I make the most suitable recommendations for you, I’d like to ask you some questions.\");\n        }).then(() => {\n          return this.bot(\"Which brand do you prefer?\")\n        }).then(() => {\n          return botui.action.button({\n            addMessage: true,\n            human: false,\n            action: [{text: \"Apple\", value: \"Apple\"}, {text: \"Huawei\", value: \"Huawei\"}, {\n              text: \"Samsung\",\n              value: \"Samsung\"\n            }, {text: \"Others\", value: \"Others\"}]\n          }).then((res) => {\n            this.user_prefer.brands.push(res.value)\n            let msg = \"\"\n            if (res.value === 'Apple') {\n              msg = \"Okay, you’d like to buy an iPhone for a gift.\"\n            } else if (res.value === \"Others\") {\n              msg = \"Okay, you’d like to buy a phone from other brands as a gift.\"\n            } else {\n              msg = \"Okay, you’d like to buy a phone from \" + res.value + \" as a gift.\"\n            }\n            //console.log(this.user_prefer)\n            this.bot(msg).then(()=>{\n              return this.bot(\" Great choice!\")\n            }).then(()=>{\n              return this.bot(\"What is your maximum budget for buying a phone?\")\n            }).then(()=>{\n              return botui.action.button({\n                addMessage: true,\n                human: false,\n                action: [{text: \"300\", value: \"300\"}, {text: \"600\", value: \"600\"}, {\n                  text: \"1000\",\n                  value: \"1000\"\n                }, {text: \"Over 1000\", value: \"Over $1000\"}]\n              }).then((res)=>{\n                this.user_prefer.budget = res.value;\n                let price = \"\";\n                let brand = \"\";\n                if(res.value ==='Over $1000'){\n                  price = \"more than $1000\"\n                }else {\n                  price = `less than $${res.value}`\n                }\n                if(this.user_prefer.brands[0]==='Apple'){\n                  brand = \"an iPhone\"\n                }else if(this.user_prefer.brands[0]==='Others') {\n                  brand = `a phone from other brands`\n                }else {\n                  brand = `a phone from ${this.user_prefer.brands[0]}`\n              }\n                let msg = `Okay, you’d like to buy ${brand} that costs ${price} as a gift. Let me ask another question.`\n                return this.bot(msg)\n              })\n            }).then(()=>{\n              return this.bot(\"Are you looking for a phone that has a slim body?\")\n            }).then(()=>{\n              return botui.action.button({\n                addMessage: true,\n                human: false,\n                action: [{text: \"Yes\", value: \"Yes\"}, {text: \"No\", value: \"No\"}]\n              }).then((res)=>{\n                this.user_prefer.slim = res.value;\n                let msg = \"\"\n                if(res.value === \"Yes\"){\n                  msg = \"Okay, so you are looking for a mobile phone that has a slim body. \"\n                }else{\n                  msg = \"Okay, so you may not care about the thickness of a phone. \"\n                }\n                return this.bot(msg)\n              }).then(()=>{\n                this.bot(\"Please give me a moment, and I’ll look for the best mobile phones for you.\")\n              })\n            })\n          })\n        })\n      }\n    },\n\n//购物车部分\n    clickCart: function () {\n      this.show_cart = true\n    },\n//跳到下一页\n    nextPage: function () {\n      instance.post('/api/page2', {\n        'page2T': new Date().getTime(),\n        'phonelist': this.phone_in_cart,\n        'uuid': localStorage.getItem('uuid')\n      }).then((res) => {\n        console.log(res)\n        this.$router.replace('/que1').catch((err) => {\n          console.log(err.message)\n        });\n      })\n    },\n    // ctrlAva: function () {\n    //   this.ava_css = true\n    //   setTimeout(() => {\n    //     this.ava_css = false\n    //   }, 1000);\n    // }\n  },\n  beforeDestroy() {\n    clearInterval(this.timer);\n  },\n  // mounted() {\n  //   localStorage.setItem(\"uuid\", \"e34cddc4a7ae47bb9f7badf9e44cf41e\");\n  //   // this.timer = setInterval(() => {\n  //   //   setTimeout(this.ctrlAva, 0)\n  //   // }, 4000)\n  // },\n  computed: {\n    // 计算属性的 getter\n    cart_item_count: function () {\n      return this.phone_in_cart.length;\n    }\n  }\n}\n</script>\n\n<style scoped>\n.avatar_back {\n  position: absolute;\n  top: 3px;\n  left: 50%;\n  margin-left: -26px;\n  z-index: 499;\n  width: 50px;\n  height: 50px;\n  border: 1px solid #c8c9cc;\n  border-radius: 46px;\n  background-color: #dcdee0;\n}\n\n.avatar {\n  position: absolute;\n  z-index: 500;\n  width: 43px;\n  height: 43px;\n  background-repeat: no-repeat;\n  background-image: url('../assets/imgs/avatar.png');\n}\n\n.avatar_ani {\n  animation: avatar 1s steps(16) infinite;\n}\n\n@keyframes avatar {\n  0% {\n    background-position: 0 0;\n  }\n  100% {\n    background-position: -688px, 0;\n  }\n}\n\n</style>\n"]}]}